\documentclass[11pt,a4paper,notitlepage,fleqn]{article}

\input{preamble.tex}

\title{Αναλογικές Τηλεπικοινωνίες
	\\
	{ 
		\normalsize Σημειώσεις από τις παραδόσεις
	}}
\date{Οκτώβριος-Ιανουάριος 2017
	\\
	{ 
		\small Τελευταία ενημέρωση: \today
	}
}
\author{
	Για τον κώδικα σε \LaTeX, ενημερώσεις και προτάσεις:
	\\
	\url{https://github.com/kongr45gpen/ece-notes}}

\setallmainfonts(Digits,Latin,Greek){Asana Math}
\setmainfont{Noto Serif}
\setsansfont{Ubuntu}
%\usepackage{unicode-math}
\usepackage{polyglossia}
\newfontfamily\greekfont[Script=Greek,Scale=0.95]{Noto Serif}
\setmathfont{XITS Math}

\hypersetup{pdftitle = {Αναλογικές Τηλεπικοινωνίες}}


\begin{document}
\maketitle

\hrule
\vspace{50pt}
	
Αναλογικές Τηλεπικοινωνίες

\begin{attnbox}{Εγγραφή στη λίστα}
	Μήνυμα στο \href{mailto:dimakis@auth.gr}{\texttt{dimakis@auth.gr}} με θέμα
	\textit{\textbf{Αναλογικές Τηλεπικοινωνίες}}.
	
	\tcblower
	
	Στη λίστα θα στέλνονται ασκήσεις χρήσιμες για τις εξετάσεις και λοιπές ανακοινώσεις.
\end{attnbox}

Κάθε Τρίτη 18:00 - 20:00 θα γίνονται ασκήσεις από τον Κ. Αρκουδογιάννη σε \textit{ένα τμήμα},
και η θεωρία θα γίνεται κανονικά σε τμήματα τις υπόλοιπες ημέρες από τον κ. Δημάκη.

Εξετάσεις: Όλα ανοιχτά.

Το μάθημα θα γίνει με βάση το βιβλίο του Haykin.

Ιστοσελίδα Ασκήσεων:
\url{http://genesis.ee.auth.gr/dimakis/greek/courses/telesysI}

\section{Εισαγωγή}
Επικοινωνία είναι η μεταφορά μηνυμάτων, που μπορεί να έχουν τη μορφή απλών συμβόλων / φθόγγων
ή πιο περίπλοκων μηνυμάτων.

Για τον μηχανικό, επικοινωνία είναι η μετάδοση ή μεταφορά πληροφορίας από ένα σημείο \( A \) σε ένα σημείο \( B \) του χώρου.

\begin{center}
	\begin{tikzpicture}
	\draw[thin,gray,dashed] (0,0) -- (2,0);
	\filldraw (0,0) circle (2pt) node[left] {$A$};
	\filldraw (2,0) circle (2pt) node[right] {$B$};
	\end{tikzpicture}
\end{center}

Την πληροφορία μπορούμε να την ορίσουμε ως ένα σύνολο ταξινομημένων συμβόλων, που μαζί ίσως
σχηματίζουν μια λέξη, μια πρόταση, ή ένα νόημα. Ένας καλύτερος ορισμός έχει δοθεί από τον
Shannon στη Θεωρία Πληροφοριών.

Μία ακόμα παράμετρος είναι ο χρόνος μεταφοράς της πληροφορίας, αν και συνήθως δεν μας
ενδιαφέρει στις αναλογικές τηλεπικοινωνίες (δεδομένης της ταχύτητας του φωτός), εκτός
αν προσπαθούμε να επικοινωνήσουμε με κάτι εκτός του πλανήτη.

Τα σήματα αυτά μπορούν να μεταφέρουν αριθμούς, κείμενο, εικόνα, ήχο, βίντεο, αρχεία κ.ά, και
βρίσκονται σε σχετικά χαμηλές συχνότητες (\textbf{baseband}). Για παράδειγμα, το εύρος της ανθρώπινης φωνής που
απαιτείται για να είναι καταληπτή είναι \( 300 \ \mathrm{Hz} \)-\( 3300\ \mathrm{Hz} \), ενώ
τα τηλεοπτικά σήματα κωδικοποιούνται σε συχνότητες έως \( 6 \ \mathrm{MHz} \). Τέτοιες
συχνότητες όμως είναι δύσκολο να μεταδοθούν (αν π.χ. σκεφτούμε ότι οι συχνότητες αρκετών
ηλεκτρομαγνητικών κυμάτων ή του ορατού φωτός είναι της τάξης των \( \mathrm{GHz} \) και
\( \mathrm{THz} \)). Επομένως, για να επιτύχει η επικοινωνία απαιτείται η αύξηση της
συχνότητας του σήματος, μέσω μιας διαδικασίας που λέγεται \textbf{διαμόρφωση}.

\begin{tikzpicture}[scale=1]
\def\h{0.6}
\filldraw (-0.5,0) circle(1.5pt) node[left] {$A$};
\draw (0,-\h/2) rectangle ++(1.5,\h) node[midway] {Πηγή};
\draw (1.5,0) -- (1.95,0);
\node[cloud, cloud puffs=15.7, cloud ignores aspect,
rotate=90,minimum width=3cm, minimum height=1.2cm, align=center, draw]
(cloud) at (2.63cm, 0cm) {Διαμόρφωση};
\draw (3.3,0) -- (3.7,0);
\draw (3.7,-\h/2) rectangle ++(1.5,\h) node[midway] {Πομπός};

\draw[->] (5.2,0) -- ++ (0.2,0) -- ++(0,-1) -- ++(0.3,0);
\draw 
(5.7,-1-2*\h/2) rectangle ++(3,2*\h) node[midway,align=center,rectangle] {Κανάλι\\Μέσο διάδοσης};
\draw (8.7,-1) -- ++(0.3,0) -- ++(0,1) -- ++(0.2,0);
\draw (9.2,-\h/2) rectangle ++(1.5,\h) node[midway] {Δέκτης};
\draw (10.7,0) -- ++(0.35,0);
\node[cloud, cloud puffs=15.7, cloud ignores aspect,
rotate=90,minimum width=3cm, minimum height=1.6cm, align=center, draw]
(cloud) at (11.85cm, 0cm) {Αποδιαμόρφωση};
\draw (12.6,0) -- (13,0);
\draw (13,-\h/2) rectangle ++(1.8,\h) node[midway,scale=.9] {Αποδέκτης};
\filldraw (14.8+0.5,0) circle(1.5pt) node[right] {$B$};
\end{tikzpicture}

Η επιλογή της κατάλληλης συχνότητας του σήματος που θα στείλουμε από την κεραία, εξαρτάται
από τα χαρακτηριστικά του ηλεκτρομαγνητικού κύματος. Για παράδειγμα, πιο χαμηλές συχνότητες
(π.χ. AM) μπορούν να περάσουν μέσα από βουνά και εμπόδια, φτάνοντας σε μεγάλες αποστάσεις
στον πλανήτη, και ακολουθώντας την καμπύλη της γης. Τα βραχέα μπορούν να χτυπήσουν στην
ιονόσφαιρα και να ανακλαστούν για ακόμα μεγαλύτερη κάλυψη. Αντιθέτως, οι υψηλές συχνότητες
(π.χ. FM) επιτρέπουν υψηλότερη ποιότητα μετάδοσης.

\begin{wrapfigure}{r}{0.3\textwidth}\centering
	\begin{tikzpicture}[scale=.5,every node/.style={scale=.7}]
	\def\l{1}
	\def\h{3.5}
	\def\N{7}
	
	\begin{scope}[every node/.style={midway,above,scale=.4}]
	\draw[->] (0,1) -- (0,0) node[midway,right] {user};
	\draw (-\l,0) rectangle (\l,-\h);
	\draw(-\l,-1*\h/7) -- ++(2*\l,0) node {Application};
	\draw(-\l,-2*\h/7) -- ++(2*\l,0) node {Presentation};
	\draw(-\l,-3*\h/7) -- ++(2*\l,0) node {Session};
	\draw(-\l,-4*\h/7) -- ++(2*\l,0) node {Transport};
	\draw(-\l,-5*\h/7) -- ++(2*\l,0) node {Network};
	\draw(-\l,-6*\h/7) -- ++(2*\l,0) node {Data Link};
	\draw(-\l,-7*\h/7) -- ++(2*\l,0) node[scale=1.3,yshift=-1mm] {Physical};
	\end{scope}
	
	\begin{scope}[every node/.style={midway,above,scale=.4,baseline},xshift=5cm]
	\draw[<-] (0,1) -- (0,0) node[midway,right] {user};
	\draw (-\l,0) rectangle (\l,-\h);
	\draw(-\l,-1*\h/7) -- ++(2*\l,0) node {Application};
	\draw(-\l,-2*\h/7) -- ++(2*\l,0) node {Presentation};
	\draw(-\l,-3*\h/7) -- ++(2*\l,0) node {Session};
	\draw(-\l,-4*\h/7) -- ++(2*\l,0) node {Transport};
	\draw(-\l,-5*\h/7) -- ++(2*\l,0) node {Network};
	\draw(-\l,-6*\h/7) -- ++(2*\l,0) node {Data Link};
	\draw(-\l,-7*\h/7) -- ++(2*\l,0) node[scale=1.3,yshift=-1mm] {Physical};
	\end{scope}
	
	\draw (0,-\h) -- ++(0,-1) -- ++(1.5,0);
	\draw (1.5,-\h-1+0.4) rectangle ++(2,-0.8) node[midway] {Κανάλι};
	\draw (3.5,-\h-1) -- ++(1.5,0) -- ++(0,1);
	
	\draw[<->,thick,gray] (1.5,-1.7) to[bend left] node[midway,above] {Peer} ++(2,0);
	
	\draw (current bounding box.north) node[rectangle,align=center]
	{OSI\\7 επιπέδων};
	\end{tikzpicture}
\end{wrapfigure}

Για την κωδικοποίηση και αποκωδικοποίηση των δεδομένων, πρέπει ο πομπός και ο δέκτης να
συμφωνήσουν σε ένα κοινό πρότυπο, για παράδειγμα στο TCP/IP ή το OSI 7 επιπέδων.

Σε αυτό το μάθημα μας ενδιαφέρει το φυσικό επίπεδο μόνο.

Οι ψηφιακές επικοινωνίες αναφέρονται σε ψηφιακά δεδομένα, αλλά πρακτικά η μετάδοση
του σήματος μέσω των καναλιών (π.χ ηλεκτρομαγνητικά κύματα) είναι αναλογική, αφού δεν γίνεται
να έχουμε άμεση μετάβαση της κατάστασης από 0 ως 1:

\begin{tikzpicture}[scale=1]
\draw (0,-2) -- (0,2);
\draw (0,0) -- (6,0);

\draw[very thick,black!70!blue] plot[const plot]
coordinates {(0,1) (1,-1) (3,1) (4,-1) (5.5,1) (6,1)};

\draw[very thick,black!20!cyan!80!blue] plot[const plot,smooth,tension=0.8]
coordinates {(0,0.8) (0.8,0.7) (1.5,-1.4) (2.7,-0.8) (3.5,1) (4.9,-1.2) (5.5,1) (6,1.2)};

\filldraw[fill=black!70!blue] (7,-0.3) rectangle ++(0.2,0.2) node[midway,right,xshift=1mm] {ψηφιακό σήμα};

\filldraw[fill=black!20!cyan!80!blue] (7,-0.8) rectangle ++(0.2,0.2) node[midway,right,xshift=1mm] {πραγματικό σήμα};
\end{tikzpicture}

Πρακτικά οι αναλογικές τηλεπικοινωνίες χρησιμοποιούνται πλέον μόνο στους ραδιοφωνικούς
σταθμούς FM (που αρχίζουν και αυτοί να καταργούνται), αλλά συνεχίζουμε να τις μελετάμε για
λόγους ιστορικούς, διδακτικούς, και επειδή το σήμα όπως αναφέρθηκε παραπάνω είναι εν γένει
αναλογικό. Στο νέο πρόγραμμα σπουδών δεν υπάρχει ακριβώς αυτό το μάθημα.

\subsection{Βασικές έννοιες}
\paragraph{Σήμα βασικής συχνότητας (baseband)}
Τα σήματα βασικής συχνότητας (\textbf{baseband}) προέρχονται από το αρχικό σήμα σε
"χαμηλές" συχνότητες όπως αναφέρθηκε παραπάνω (συνήθως από 0 μέχρι π.χ. 20 \( \mathrm{kHz} \)
ή 6 \( \mathrm{MHz} \)):

\begin{tikzpicture}[scale=1]
\def\s{ (0,0) (0.5,1) (0.7,1.2+0.1*rand) (1,1.5) (1.2,1.2+0.1*rand) (1.4,1+0.1*rand)
	(1.6, 0.7+0.2*rand) (1.8,0.4+0.15*rand) (2,0)}

\pgfmathsetseed{15}
\draw[very thick, orange] plot [smooth] coordinates \s;
\pgfmathsetseed{15}
\draw (2,0) node[below] {$w$};

\draw (0,0) node[below left] {$0$};
\draw (-3,0) -- (3,0) node[below right] {$\mathrm{Hz}$};
\draw (0,-0.2) -- (0,2);
\end{tikzpicture}

Ή, επειδή χρησιμοποιούμε \textit{δίπλευρα} φάσματα:

\begin{tikzpicture}[scale=1]
\def\s{ (0,0) (0.5,1) (0.7,1.2+0.1*rand) (1,1.5) (1.2,1.2+0.1*rand) (1.4,1+0.1*rand)
	(1.6, 0.7+0.2*rand) (1.8,0.4+0.15*rand) (2,0)}

\pgfmathsetseed{15}
\draw[very thick, orange] plot [smooth] coordinates \s;
\pgfmathsetseed{15}
\draw[very thick, orange!90!brown, xscale=-1] plot [smooth] coordinates \s;
\draw (2,0) node[below] {$w$};
\draw (-2,0) node[below] {$-w$};

\draw (0,0) node[below left] {$0$};
\draw (-3,0) -- (3,0) node[below right] {$\mathrm{Hz}$};
\draw (0,-0.2) -- (0,2);
\end{tikzpicture}

Η μέγιστη θετική συχνότητα \( w \) ορίζει το \textbf{εύρος ζώνης (bandwidth)} του σήματος.

Η διαδικασία που θα χρησιμοποιήσουμε για να αυξήσουμε τη συχνότητα του σήματος ονομάζεται
\textbf{διαμόρφωση (modulation)}.

Συνήθως έχουμε μια \textbf{φέρουσα συχνότητα}:
\[
c(t) = A_c\cos(2\pi f_c t)
\]
και πρέπει να βρούμε έναν τρόπο να προσθέσουμε σε αυτήν τις πληροφορίες του αρχικού σήματος.
Στην παραπάνω εξίσωση έχουμε τρεις παραμέτρους που μπορούμε να επηρεάσουμε: το πλάτος,
τη συχνότητα και τη φάση:
\[
c(t) =
\underset{\substack{\downarrow\\\mathclap{A_c(t)}}}{A_c}
\cos(2\pi
\underset{\substack{\downarrow\\\mathclap{f_c(t)}}}{f_c}
t
+
\underset{\substack{\downarrow\\\mathclap{\phi(t)}}}{\phi}
)
\]

Έτσι έχουμε τρία είδη διαμόρφωσης:
\begin{description}
	\item[AM] Διαμόρφωση Πλάτους (Amplitude Modulation)
	\item[FM] Διαμόρφωση Συχνότητας (Frequency Modulation)
	\item[PM] Διαμόρφωση Φάσης (Phase Modulation)
\end{description}

\subsection{AM}
Έστω το φέρον:
\[
c(t) = A_c\cos(2\pi f_c t)
\]
και θέλουμε να μεταφέρουμε ένα σήμα:
\[
m(t) \qquad \text{στη βασική ζώνη}
\]

Θεωρούμε, για λόγους που θα δούμε παρακάτω, ότι το φέρον έχει συχνότητα πολύ μεγαλύτερη
από το εύρος ζώνης της πληροφορίας:
\[
f_c \gg w
\]

Το σήμα που εκπέμπουμε κατά AM είναι το εξής:
\[
s(t) = A_c\left[ 1 + k_a \cdot m(t) \right]\cos(2\pi f_c t)
\]
το οποίο μπορεί να εκφράζεται σε Volt ή Ampere και ίσως εκπέμπεται από κάποια κεραία.

Γραφικά:

\begin{center}
\begin{tikzpicture}[scale=1.2,xscale=1.3]
\def\f{1.3+0.30362*\x-6.94276*\x^2+5.23511*\x^3-0.0466465*\x^4-0.696833*\x^5+0.128634*\x^6}
%coordinates {(0,1.5) (0.7,0) (1.2,-0.5) (1.5,0) (2,1.5)  (3,1.5) (3.2,1.5)}
\draw (0,-1.5) -- (0,2);
\draw (0,0) -- (3,0);

\draw[very thick,black!70!blue,variable=\x,samples=\gsamples,domain=0:3]
plot ({\x},{\f}) (0,1.3) node[left] {$m(t)$};

\begin{scope}[yshift=-4cm]
\draw (0,-2) -- (0,2);
\draw (0,0) -- (3,0);

\draw[thick,blue!70!black,variable=\x,samples=\gsamples,domain=0:3,smooth] plot ({\x},{(1.5*sin(\x r*40))}) (0,1.5) node[above right] {$c(t)$};
\draw (0,-1.5) node[left] {$-A_c$};
\draw (0,1.5) node[left] {$A_c$};
\end{scope}

\begin{scope}[xshift=5cm]
\draw (0,-0.5) -- (0,3);
\draw (0,0) -- (3,0);

\draw[very thick,black!70!blue,variable=\x,samples={\gsamples/2},domain=0:3,opacity=.05]
plot ({\x},{\f}) (0,1.3);
\draw[very thick,black!70!blue,variable=\x,samples=\gsamples,domain=0:3,smooth]
plot ({\x},{\f+1}) (0,1.3+1) node[left] {$\left[1+k_am(t)\right]$};
\end{scope}

\begin{scope}[xshift=5cm,yshift=-4cm]
\draw[thin,dashed,cyan!70!blue,variable=\x,samples=\gsamples,domain=0:3]
plot ({\x},{\f+1}) (0,1.3+1);
\draw[very thick,green!70!blue,variable=\x,samples=\gsamples,domain=0:3]
plot ({\x},{(\f+1)*sin(\x r*40)}) (1.3+1,0);

\draw[->,cyan!70!blue] (2.65,3) to[bend left] ++(1,1) node[above right] {Περιβάλλουσα};

\draw (0,-3) -- (0,3);
\draw (0,0) -- (3,0);
\end{scope}
\end{tikzpicture}
\end{center}

Η περιβάλλουσα του διαμορφωμένου σήματος περιέχει την πληροφορία που θέλουμε.

Η σταθερά \( k_a \) ονομάζεται \textbf{ευαισθησία πλάτους} του διαμορφωτή, και θέλουμε
να είναι τέτοια ώστε \( \left[1 + k_a m(t)\right] > 0 \), διότι σε διαφορετική περίπτωση:

\begin{tikzpicture}[scale=1,xscale=1.3]
\def\f{1.3+0.30362*\x-6.94276*\x^2+5.23511*\x^3-0.0466465*\x^4-0.696833*\x^5+0.128634*\x^6}
%coordinates {(0,1.5) (0.7,0) (1.2,-0.5) (1.5,0) (2,1.5)  (3,1.5) (3.2,1.5)}
\draw (0,-2) -- (0,2);
\draw (0,0) -- (3,0);

\draw[very thick,black!70!blue,variable=\x,samples=\gsamples,domain=0:3]
plot ({\x},{\f}) (0,1.3);

\begin{scope}[xshift=5cm]
\draw[very thick,green!70!blue,variable=\x,samples=\gsamples,domain=0:3]
plot ({\x},{(\f)*sin(\x r*40)}) (1.3+1,0);
\draw[very thick,black!70!blue,variable=\x,samples=\gsamples,domain=0:3]
plot ({\x},{abs(\f)}) (0,1.3);

\draw (0,-2) -- (0,2);
\draw (0,0) -- (3,0);
\end{scope}
\end{tikzpicture}

Επειδή ο αποδιαμορφωτής βλέπει μόνο τις θετικές κορυφές του σήματος, εδώ δεν έχει μεταφέρει
σωστά την πληροφορία στα σημεία όπου \(  \left[1 + k_a m(t)\right] < 0  \), αλλά την έχει
μεταφέρει ανεστραμμένη. Αυτό ονομάζεται \textbf{υπερδιαμόρφωση}.

Επομένως, θέλουμε:
\begin{align*}
	1+ k_a m(t) &\geq 0 \implies \\
	\Aboxed{\left\lvert k_a m(t) \right\rvert &\leq 1} \implies \\
	-1 \leq k_a m(t) &\leq 1
\end{align*}

Παρατηρούμε ότι για να μην έχουμε υπερδιαμόρφωση, το σήμα μας δεν μπορεί να αποκτά πολύ
μεγάλο πλάτος.

\begin{defn}{Ποσοστό διαμόρφωσης}{}
	Ως \textbf{ποσοστό διαμόρφωσης} ορίζουμε:
	\[
	\left\lvert
	\max k_a m(t)
	\right\rvert \cdot 100
	\]
\end{defn}

\paragraph{}
Ξαναγράφουμε το σήμα και παίρνουμε το μετασχηματισμό Fourier:
\begin{align*}
	s(t) &= A_c \cos 2\pi f_c t + Ak_a m(t) \cos 2\pi f_c (t) \\
	S(f) &=
	\frac{A_c}{2}\left[ δ(f-f_c)+δ(f+f_c) \right]
	+ \frac{k_aA_c}{2}\left[ M(f-f_c) + M(f+f_c) \right]
\end{align*}

\begin{tikzpicture}[scale=1]
\draw[draw=orange!50!brown,very thick]
(-1.2,0) node[below] {$-w$}
-- (0,1.8) node[right] {$M(0)$}
-- (1.2,0) node[below] {$w$}
;

\draw (-2,0) -- (2,0);
\draw (0,-0.5) -- (0,3) node[right] {$M(f)$};

\begin{scope}[yshift=-4.5cm]
\draw[xshift=-2cm,draw=black!50!orange,dashed,very thick,every node/.style={scale=.9}]
(-1.2,0) node[below] {$-f_c-w$}
-- (0,1.8)
-- (1.2,0) node[below] {$-f_c+w$}
(0,0) node[below] {$-f_c$}
;
\draw[xshift=2cm,draw=black!50!orange,dashed,very thick,every node/.style={scale=.9}]
(-1.2,0) node[below] {$f_c-w$}
-- (0,1.8)
-- (1.2,0) node[below] {$f_c+w$}
(0,0) node[below] {$f_c$}
;
\draw[ultra thick,->] (-2,0) -- ++(0,2.5)
node[above] {$\sfrac{A_c}{2}$};
\draw[ultra thick,->] (2,0) -- ++(0,2.5);

\draw (-4,0) -- (4,0);
\draw[->] (0,-0.5) -- (0,3) node[right] {$S(f)$};

\draw[dashed] (-2.1,2.5) --++(4.2,0);
\draw[dashed] (-2.1,1.8) --++(4.2,0);
\draw (0,1.8) node[above right,scale=.7] {$\sfrac{1}{2}k_aA_cM(0)$};

\end{scope}
\end{tikzpicture}

Βλέπουμε ότι το φάσμα του σήματος μετακινήθηκε στη συχνότητα.

Παρατηρούμε επίσης ότι το φάσμα είναι δίπλευρο, και θυμόμαστε από το αναλογικό σήμα ότι
η αρνητική συχνότητα δεν έχει φυσική σημασία, αλλά εκφράζει τον αρνητικό εκθέτη στην
έκφραση του συνημιτόνου \( 
\mathrm{Re}\left[
\frac{e^{jωt}+e^{-jωt}}{2}
\right]
 \).
 
Αν έχουμε \textbf{μικρή συχνότητα} \( f_c \), τότε το φάσμα του σήματος δεν περνάει το 0:

\begin{tikzpicture}[scale=1]
\draw[dashed] (0.7,0) -- ++(0,1.8);
\draw[xshift=-0.7cm,draw=orange!50!brown,,very thick,every node/.style={scale=.9}]
(-1.2,0)
-- (0,1.8)
-- (1.2,0)
(0,0)
;
\draw[xshift=0.7cm,draw=blue!50!brown,very thick,every node/.style={scale=.9}]
(-1.2,0) node[below] {$f_c-w$}
-- (0,1.8)
-- (1.2,0) node[below] {$f_c+w$}
(0,0) node[below] {$f_c$}
;

\draw[draw=gray!70!black,thin] (-3,0) -- (3,0);
\draw[->,draw=gray!70!black,thin] (0,-0.5) -- (0,3) node[right] {$S(f)$};

\draw[very thick,black!70!gray,->] (0,-0.75) -- ++(0,-0.5);

\begin{scope}[yshift=-4.5cm]
\draw[->,draw=gray!70!black,thin] (0,-0.5) -- (0,3) node[right] {$S(f)$};

\draw[very thick,orange!50!brown] (-1.9,0) -- (-0.7,1.8) -- (-0.5,1.5) -- (-0.49,1.5);
\draw[very thick,blue!50!brown]
(-0.5,1.5) -- (0.5,1.5);
\draw[very thick,path fading=east,orange!50!brown]
(-0.5,1.5) -- (0.5,1.5);
\draw[very thick,blue!50!brown] (0.49,1.5) -- (0.5,1.5) -- (0.7,1.8) -- (1.9,0);

\draw[draw=gray!70!black,thin] (-3,0) -- (3,0);

\end{scope}
\end{tikzpicture}

και το αποτέλεσμα είναι παραμορφωμένο και μακριά από το επιθυμητό.

Το εύρος φάσματος του σήματος είναι \( 2w \) (από \( f_c-w \) μέχρι \( f_c+w \)), το οποίο
είναι περισσότερο απ' όσο χρειάζεται (αφού το αριστερό του μέρος είναι ίδιο με το δεξί),
ενώ το σήμα είναι και ενεργειοβόρο, αφού τα \( \sfrac{2}{3}  \) της ενέργειας καταναλώνονται
στον όρο \( δ \) και όχι στην πληροφορία.

\begin{tikzpicture}[scale=0.8]
\draw[xshift=-3cm,fill=gray,fill opacity=0.04]
(-1.6,0) -- ++(0,3) -- ++(1.6*2,0) -- ++(0,-3);
\draw[xshift=3cm,fill=gray,fill opacity=0.04]
(-1.6,0) -- ++(0,3) -- ++(1.6*2,0) -- ++(0,-3);

\draw[xshift=-3cm,draw=black!50!orange,very thick,every node/.style={scale=.8}]
(-1.2,0) node[below] {$-f_c-w$}
-- (0,1.8)
-- (1.2,0) node[below] {$-f_c+w$}
(0,0) node[below] {$-f_c$}
;
\draw[xshift=3cm,draw=black!50!orange,very thick,every node/.style={scale=.8,opacity=1},
fill=lime!60!green,fill opacity=.5]
(-1.2,0) node[below] {$f_c-w$}
-- (0,1.8)
-- (1.2,0) node[below] {$f_c+w$}
(0,0) node[below] {$f_c$}
;
\draw[ultra thick,->] (-3,0) -- ++(0,2.5);
\draw[ultra thick,->] (3,0) -- ++(0,2.5);

\draw (-5.5,0) -- (5.5,0);
\draw[->] (0,-0.5) -- (0,4) node[right] {$S(f)$};

\draw[xshift=-3cm]
(-1.6,0) -- ++(0,3) -- ++(1.6*2,0) -- ++(0,-3);
\end{tikzpicture}

\subsubsection{Για ημιτονοειδή είσοδο}
Έστω ένα αρχικά ημιτονοειδές σήμα:
\[
m(t) = A_m\cos(2\pi f_mt)
\]

Τότε το διαμορφωμένο σήμα AM γίνεται:
\begin{align*}
s(t) &= A_c \left[
1 + \overbrace{μ}^{\mathclap{μ = k_aA_m}}
\cdot \cos(2\pi \cdot f_m t)
\right]\cos(2\pi f_c t)
\hspace{200pt}
\boxed{
μ \leq 1
}
\\
&= A_c\cos(2\pi f_c t) + A_c μ\cos(2\pi f_c t)\cos(2\pi f_mt)
\\ &=
A_c\cos2πf_ct + \frac{1}{2}μA_c \cos\left[2π(f_c+f_m)t\right]
+\frac{1}{2} μA_c\cos\left[
2π(f_c-f_m)t
\right]
\\
\updownarrow &\quad \text{Μ. F}
\\
S(f) &= \mathsmaller{\mathsmaller{\frac{1}{2} A_c \left[
δ(f-f_c)+δ(f+f_c) \right]
+ \frac{1}{4}μA_c \left[
δ(f-f_c-f_m)+δ(f-f_c+f_m)
\right]
+ \frac{1}{4} μA_c\left[
δ(f-f_c+f_m)+δ(f+f_c-f_m)
\right]}}
\end{align*}

Γραφικά:\nopagebreak

\begin{center}
	\begin{tikzpicture}[scale=1]
	\draw (0,-1.8) -- (0,2);
	\draw (0,0) -- (6,0);
	
	\draw[very thick,black!70!blue,variable=\x,samples=\gsamples,domain=0:6]
	plot ({\x},{1.4*cos(1.5*\x r)}) (1.1,1) node[] {$m(t)$};
	
	\draw (0,1.4) node[left] {$A_m$};
	\draw (0,-1.4) node[left] {$-A_m$};
	
	\draw[dashed] (2/1.5*pi,0) node[below] {$T_m=\frac{1}{f_m}$} -- ++(0,1.4);
	
	\begin{scope}[yshift=-5cm]
	\draw (0,-1.8) -- (0,2);
	\draw (0,0) -- (6,0);
	
	\draw[very thick,blue!70!cyan,variable=\x,samples=\gsamples,domain=0:6,smooth]
	plot ({\x},{1.2*sin(26*\x r)}) (1,1.2) node[above] {$c(t)$};
	
	\draw (0,1.2) node[left] {$A_c$};
	\draw (0,-1.2) node[left] {$-A_c$};
	
	\draw[dashed] (0,1.2) -- ++(6,0);
	\end{scope}
	
	\begin{scope}[yshift=-10cm]
	\draw (0,-2.5) -- (0,2.5);
	\draw (0,0) -- (6,0);
	
	\draw[dashed,variable=\x,samples=\gsamples,domain=0:6]
	plot ({\x},{1+0.7*cos(1.5*\x r)});
	\draw[dashed,variable=\x,samples=\gsamples,domain=0:6]
	plot ({\x},{-1-0.7*cos(1.5*\x r)});
	
	\draw[very thick,green!70!blue,variable=\x,samples=\gsamples,domain=0:6,smooth]
	plot ({\x},{(1+0.7*cos(1.5*\x r))*sin(26*\x r)}) (1.2,1.2) node[above] {$s(t)$};


	\end{scope}
	
	\begin{scope}[xshift=10cm]
	\draw (-3,0) -- (3,0);
	\draw[->] (0,-1) -- (0,2) node[right] {$M(f)$};
	
	\draw[black!70!blue,ultra thick,->] (-0.7,0) node[below] {$-f_m$}-- ++(0,1.5);
	\draw[black!70!blue,ultra thick,->] (0.7,0) node[below] {$f_m$}-- ++(0,1.5);
	
	\begin{scope}[yshift=-5cm]
	\draw (-3,0) -- (3,0);
	\draw[->] (0,-1) -- (0,2) node[right] {$C(f)$};
	
	\draw[blue!70!cyan,ultra thick,->] (-2.5,0) node[below] {$-f_c$}-- ++(0,1.5);
	\draw[blue!70!cyan,ultra thick,->] (2.5,0) node[below] {$f_c$}-- ++(0,1.5);
	\end{scope}
	
	\begin{scope}[yshift=-10cm]
	\draw (-3,0) -- (4,0);
	\draw[->] (0,-1) -- (0,2) node[right] {$S(f)$};
	
	\draw[blue!70!cyan,ultra thick,->] (-2.5,0) node[below] {$-f_c$}-- ++(0,1.5);
	\draw[black!70!blue,very thick,->] (-2.8,0) -- ++(0,0.7);
	\draw[black!70!blue,very thick,->] (-2.2,0) -- ++(0,0.7);
	
	\draw[blue!70!cyan,ultra thick,->] (2.5,0) node[below,scale=1] {$f_c$}-- ++(0,1.5);
	\draw[black!70!blue,very thick,->] (2.2,0) node[below left,scale=.9] {$f_c-f_m$}-- ++(0,0.7);
	\draw[black!70!blue,very thick,->] (2.8,0) node[below right,scale=.9] {$f_c+f_m$}-- ++(0,0.7);
	\end{scope}
	\end{scope}
	\end{tikzpicture}
\end{center}

\[
\underset{\substack{\downarrow\\\mathclap{\text{Bandwidth}}}}{\mathrm{B_T}}
=2f_m = 2w
\]

Επίσης προκύπτει ότι:
\begin{align*}
\frac{A_{\max}}{A_{\min}} &= \frac{A_c(1+μ)}{A_c(1-μ)} \implies \\
μ &= \frac{A_{\max} -A_{\min} }{A_{\max} + A_{\min}}
\end{align*}

\subsubsection{Ισχύς}
Αν μας ζητούνταν η ισχύς του σήματος, θα απαντούσαμε \( \frac{1}{2}A_c^2R \), αν θεωρήσουμε
ότι το σήμα είναι μια ένταση ρεύματος που διαρρέει κάποια αντίσταση \( R \). Στα σήματα
όμως θεωρούμε ότι η αντίσταση αυτή είναι 1, άρα παίρνουμε ίδιο αποτέλεσμα, είτε θεωρούμε ότι
το σήμα αναπαριστά ρεύμα, είτε τάση.

Επομένως η ισχύς π.χ. του φέροντος είναι:
\[
\boxed{
\frac{1}{2}A_c^2
	}
\]

Το πλευρικό σήμα για ημιτονοειδή είσοδο έχει ενέργεια:
\[
2\times \frac{1}{8}μ^2A_c^2
\]

και ο λόγος του με τη συνολική ενέργεια είναι:
\[
\frac{2\cdot \frac{1}{8} μ^2A_c^2}{\frac{1}{2}A_c^2+2\cdot\frac{1}{8}μ^2A_c^2}
= \frac{μ^2}{2+μ^2}
\]

Γραφικά:

\begin{tikzpicture}
\def\c{gray!50!black}
\draw (0,0) -- (4,0) node[below] {$μ$};
\draw (0,-0.5) -- (0,4) node[left] {Ισχύς \%};

\draw[\c,thin] (3,-0.5) -- (3,4);

\draw (0,0) node [below left] {$0$};
\draw (3,0) node [below left] {$1$};

\draw[\c,thin] (0,1) node[left] {$\sfrac{1}{3}$} -- (4,1);
\draw[\c,thin] (0,2) node[left] {$\sfrac{2}{3}$} -- (4,2);
\draw[\c,thin] (0,3) node[left] {$\sfrac{3}{3}$} -- (4,3);

\draw[gray,dashed] (0.2*3,-0.4) node[right,scale=.8] {$0.2=20\%$} -- (0.2*3,4);
\draw[gray,dashed] (0.2*3,{3*0.2^2/(2+0.2^2)}) -- ++(-0.2*3,0)
node[scale=0.6,left] {$2\%$};

\draw[->,black!80!brown] (1.51,2.67) to[bend left=20] ++(0.5,1.5) node[above right] {Ισχύς φέροντος};
\draw[->,black!80!brown] (2.61,0.82) to[bend right=20] ++(0.8,-0.5) node[right] {
	Ισχύς πλευρικών συνιστωσών};

\draw[very thick,black!80!brown,variable=\m,domain=0:3,samples=\gsamples]
plot ({\m}, {3*(\m/3)^2/(2+(\m/3)^2)});
\draw[very thick,black!80!brown,variable=\m,domain=0:3,samples=\gsamples]
plot ({\m}, {3-3*(\m/3)^2/(2+(\m/3)^2)});
\end{tikzpicture}

Όσο αυξάνουμε το \( μ \), αυξάνεται το ποσοστό της ισχύος που καταναλώνεται για τη μετάδοση
του σήματος και όχι του φέροντος, αλλά η ισχύς του φέροντος συνεχίζει να είναι μεγάλη.

\subsubsection{Διαμορφωτής AM}
Ένα ερώτημα που προκύπτει είναι ποιό κύκλωμα θα πραγματοποιήσει τον πολλαπλασιασμό του
σήματος με το φέρον. Για αυτό παρουσιάζεται το παρακάτω κύκλωμα, που λειτουργεί
ως \textbf{διαμορφωτής AM (διακοπτικός - switching modulator)}:

\begin{circuitikz}[american,scale=1.3]
	\draw (0,0) to[esource,label=$m(t)$] (0,2)
	to[sV,label={$c(t)\equals A_c\cos(2πf_ct)$}] (2,2)
	to[D] (4,2)
	to[R=$R_L$] (4,0)
	-- (0,0);
	
	\draw (2,2) to[open,v=$v_1(t)$,*-*] (2,0);
	\draw (4,2) -- (5,2) to[open,v^=$v_2(t)$,o-o] (5,0) -- (4,0);
\end{circuitikz}

Επίσης απαιτούμε το σήμα \( m(t) \) να έχει \textbf{αρκετά μικρότερο πλάτος} από το φέρον:
\[
\left\lvert  m(t) \right\rvert \ll A_c
\]

Τότε, η τάση \( u_1 \) γίνεται:
\[
u_1(t) = m(t)+A_c \cos(2πf_ct)
\]

%\def\gsamples{700}
\begin{tikzpicture}
\draw (0,0) -- (6,0);
\draw[->] (0,-2) -- (0,3) node[left] {$u_1(t)$};

\draw[very thick,blue!50!black] plot
[variable=\t,domain=0:5,samples=\gsamples,smooth]
(\t,{2*cos(2*\t r)+0.2*cos(43.7*\t r)})
;

\draw[dashed] (2*pi/2,0) node[below] {$\sfrac{1}{f_c}$} -- ++(0,2);
\end{tikzpicture}

Και, αφού θυμηθούμε την καμπύλη λειτουργίας της διόδου, \begin{tikzpicture}[baseline,scale=0.4,every node/.style={scale=.7}]
\draw (-2,0) -- (2,0) node[below] {$u_1(t)$};
\draw[->] (0,-1) -- (0,2) node[above] {$u_2(t)$};

\draw[very thick,blue!50!black] (-2,0) -- (0,0) -- (2,2);
\end{tikzpicture}, ισχύει:
\[
u_2(t) \simeq \begin{cases}
u_1(t), &\quad \text{όταν } c(t) > 0 \\
0,&\quad \text{όταν } c(t) < 0
\end{cases}
\]

Εναλλακτικά, μπορούμε να εκφράσουμε την \( u_2(t) \) ως γινόμενο της
εισόδου \( u_1(t) \) και μιας συνάρτησης \( g_{T_0} \) που μηδενίζεται για \( c(t) <0 \) και
είναι μονάδα για \( c(t) > 0 \), δηλαδή μιας παλμοσειράς:

\begin{center}
\begin{tikzpicture}
\draw (-4.2,0) node[left] {$\cdots$} -- (4.2,0) node[right] {$\cdots$};
\draw[->] (0,-1.5) -- (0,2) node[right] {$g_{T_0}(t)$};

\draw[blue!70!cyan,ultra thick,opacity=.1]
plot[variable=\t,domain=-4.2:4.2,samples=\gsamples]
(\t,{cos(2*pi/3*\t r}) (0,1) node[above left] {$u_1(t)$};

\draw[very thick,draw=teal] (-0.75,0) node[below] {$-\sfrac{T_0}{4}$} -- ++(0,0.8) -- ++(1.5,0) -- ++(0,-0.8) node[below] {$\sfrac{T_0}{4}$} ;
\draw[very thick,draw=teal] (2+0.25,0) node[below] {$\sfrac{3T_0}{4}$} -- ++(0,0.8) -- ++(1.5,0) -- ++(0,-0.8) node[below] {$\sfrac{5T_0}{4}$};
\draw[very thick,draw=teal] (-4+0.25,0) -- ++(0,0.8) -- ++(1.5,0) -- ++(0,-0.8);

\draw (0,0) node[below right] {$0$};
\draw[dashed] (3,0) node[below] {$T_0$} -- ++(0,0.8);
\draw[dashed] (-3,0) node[below] {$-T_0$} -- ++(0,0.8);

\draw (0,0.8) node[above right] {$1$};

\draw (current bounding box.east) node[above right] {$T_0 = \frac{1}{f_c}$};
\end{tikzpicture}
\end{center}
\begin{align*}
	u_2(t) &\simeq
	\left[
	A_c\cos 2π f_c t + m(t)
	\right] \cdot g_{T_0}(t) \\
	g_{T_0(t)} &= \frac{1}{2} + \frac{2}{\pi}
	\sum_{n=1}^\infty \frac{(-1)^{n-1}}{2n+1}\cos[2πf_ct(2n-1)]
	\intertext{Άρα}
	u_2(t) &\simeq
	\left(
	A_c\cos 2πf_ct +m(t
	\right) \cdot \left[
	\frac{1}{2} + \frac{2}{π} \cos\left(
	2πf_ct
	\right)-\frac{2}{π}\frac{1}{3}\cos(2π3f_ct)
	+ \frac{2}{π}\frac{1}{5}\cos(5f_ct)+\dots
	\right]
	\\
	&=
	\frac{A_c}{2}\cos 2 π f_ct
	+ \frac{1}{2}m(t)
	\\ &\hphantom{=}
	+ \frac{2}{π}A_c\cos 2πf_ct + \infoboxed{\frac{2}{π}m(t)\cos 2πf_c t}
	\\ &\hphantom{=}
	-\frac{2}{3π}A_c\cos 2π (3f_c) \cos 2πf_ct - \frac{2}{3π}
	m(t)\cos 2π(3f_ct)+\dots
\end{align*}

Αν σχεδιάσουμε τις συχνότητες που δίνει ο τύπος σε ένα διάγραμμα φάσματος:

\begin{tikzpicture}[scale=1.2]
\draw[->] (0,-2) -- (0,2) node[above] {$U_2(f)$}; % y axis

\draw[orange!40!brown] (-0.5,0) -- (0,0.8) -- (0.5,0);
\draw[orange!20!brown!90!black,very thick,->] (0,0) -- ++(0,1);

\draw[blue!50!green,fill opacity=0.9,fill=green!5!white,blur shadow,shadow xshift=0cm,shadow yshift=0.3mm]
(0.8,0) -- ++(0,1.2) -- ++(1+2*0.2,0) -- ++(0,-1.2);

\begin{scope}[xshift=1.5cm]
\draw[draw=orange!50!brown,thick,every node/.style={scale=.7}]
(-0.5,0) node[below] {$f_c-w$} -- (0,0.8) -- (0.5,0) node[below] {$f_c+w$} ;
\draw[orange!20!brown!90!black,very thick,->] (0,0) node[below,black] {$f_c$} -- ++(0,1);
\end{scope}

\foreach \i in {3,5}
{
	\begin{scope}[xshift={\i*1.5cm}]
	\draw[orange!50!brown,thick] (-0.5,0) -- (0,0.8) -- (0.5,0);
	\end{scope}
}
\foreach \i in {2,3,...,5}
{
	\begin{scope}[xshift={\i*1.5cm}]
	\draw[orange!20!brown!90!black,very thick,->] (0,0) node[below,black] {$\i f_c$} -- ++(0,1);
	\end{scope}
}

\draw (-1,0) -- (9,0); % x axis
\draw (8.2,0.4) node[right] {$\cdots$};

\draw[gray,->,thick] (-1.75,0) to[bend right=20] ++(0.5,0);
\begin{scope}[xshift=-3.5cm]
\draw (-1.5,0) -- (1.5,0);
\draw (0,-2) -- (0,2) node[above] {$M(f)$};

\draw[draw=orange!50!brown,thick,scale=1.7]
(-0.5,0) node[below] {$-w$} -- (0,0.8) -- (0.5,0) node[below] {$w$};
\end{scope}
\end{tikzpicture}

Παρατηρούμε ότι στο φάσμα υπάρχει το επιθυμητό διαμορφωμένο AM σήμα, όπως και ο
πολλαπλασιασμός του \( m(t) \) με το φέρον. Επομένως, με ένα ζωνοπερατό φίλτρο, μπορούμε
να πάρουμε από τις άπειρες συχνότητες μόνο το τελικό φάσμα:
\begin{align*}
u(t) = &\frac{A_c}{2}\left[ 1+\frac{4}{πA_c}m(t) \right]\cos 2π f_c t
\intertext{που αντιστοιχεί στον τύπο:}
A_c\left[ 1+k_am(t) \right] \cos 2πf_c
\end{align*}

δηλαδή το κύκλωμα γίνεται:

\begin{circuitikz}[american,scale=1.3]
	\draw (0,0) to[esource,label=$m(t)$] (0,2)
	to[sV,label={$c(t)\equals A_c\cos(2πf_ct)$}] (2,2)
	to[D] (4,2)
	to[R=$R_L$] (4,0)
	-- (0,0);
	
	\draw (2,2) to[open,v=$v_1(t)$,*-*] (2,0);
	\draw (4,2) -- (5,2) to[open] (5,0) -- (4,0);
	
	% Rectangle
	\draw (5,2.5) rectangle (7,-0.5) node[align=center] (A) at (6,1) {BPF\\{%
			\footnotesize Band Pass Filter}};
	
	\draw (7,2) -- (8,2) to[open,v^=$s(t)$,o-o] (8,0) -- (7,0);
\end{circuitikz}

όπου το Band Pass Filter πρέπει να έχει κέντρο τη συχνότητα \( f_c \) και εύρος ζώνης
από \( f_c - w \) μέχρι \( f_c + w \).

Αυτό ήταν ένα παράδειγμα χρήσης \textit{μη γραμμικών στοιχείων} (δίοδος) για spectral
spread.

\begin{attnbox}{Μάθημα}
	Το μάθημα της Παρασκευής καταργείται.
	Θα γίνονται μαθήματα σε κοινό τμήμα την Τρίτη και την Τετάρτη
	από τον κ. Δημάκη.
\end{attnbox}

\subsubsection{Φωρατής περιβάλλουσας / Αποδιαμορφωτής AM}
Ο φωρατής περιβάλλουσας είναι η συσκευή που μαζεύει τις κορυφές του διαμορφωμένου σήματος
AM ώστε να παράγει το αρχικό σήμα (θυμόμαστε ότι \( s(t) = A_c\left[
1+k_a m(t)
\right] \cos(2π f_c t) \)). Η διαδικασία ονομάζεται κορυφοφώραση, και το κύκλωμα του φωρατή
δεν είναι πολύ διαφορετικό από αυτό του διαμορφωτή:

\begin{circuitikz}[american,scale=1.3,yscale=0.8]
	\draw (0,0) to[esource,l_={$s(t)$},n=sig]
	(0,2) to[R=$R_j$] (0,4)
	to [D={$z_f$},l_=$τ_f$] (2,4)
	to [C=$C$] (2,0)
	-- (0,0)
	
	(2,4) to[short] (4,4)
	to[R=$R_l$] (4,0)
	-- (2,0)
	
	(4,4) to[short,-o] (6,4)
	(4,0) to[short,-o] (6,0)
	;
	
	\draw (-1,1) node[rxantenna,xscale=-1] (antenna) {};
	\draw(antenna.1) -- (sig.n);
\end{circuitikz}

\textbf{Πώς λειτουργεί αυτό το κύκλωμα};

Θυμόμαστε ότι η συχνότητα του φέροντος είναι πολύ μεγάλη σε σχέση με τη συχνότητα του
αρχικού σήματος (π.χ. 100 ή παραπάνω φορές μεγαλύτερη).

Η δίοδος αφήνει να περάσει ρεύμα μόνο όταν το σήμα είναι θετικό. Όταν φτάσουμε σε μία
κορυφή της διαμορφωμένης κυματομορφής, ο πυκνωτής φορτίζεται άμεσα, και ξεφορτίζεται πολύ
αργά με μία εκθετική καμπύλη, μέχρι να φτάσει στην επόμενη κορυφή:

\todo{Graph 19}

Πρακτικά το κύκλωμα χωρίζεται σε δύο κομμάτια. Το αριστερό που περιλαμβάνει τη δίοδο
έχει μικρή σταθερά χρόνου και επηρεάζεται άμεσα από τις κορυφές. Το δεξί έχει μεγάλη σταθερά
χρόνου ώστε να διατηρείται η χαμηλής συχνότητας έξοδος. Ο πυκνωτής που βρίσκεται στη
μέση ανήκει και στα δύο τμήματα. Πρακτικά:
\begin{gather*}
	(R_s+τ_f)C \ll \frac{1}{f_C} \\
	\intertext{και}
	\frac{1}{f_C} \ll R_l C \ll \frac{1}{w}
\end{gather*}

Για να μην υπάρχουν οι συχνότητες που προκύπτουν από την εκθετική πτώση της τάσης του
πυκνωτή ανάμεσα στις κορυφές, μπορούμε να τοποθετήσουμε στο τέλος του κυκλώματος ένα
χαμηλοπερατό φίλτρο.

\begin{circuitikz}[american,scale=1.3,yscale=0.8]
	\draw (0,0) to[esource,l_={$s(t)$},n=sig]
	(0,2) to[R=$R_j$] (0,4)
	to [D={$z_f$},l_=$τ_f$] (2,4)
	to [C=$C$] (2,0)
	-- (0,0)
	
	(2,4) to[short] (4,4)
	to[R=$R_l$] (4,0)
	-- (2,0)
	
	(4,4) to[short] (5,4)
	(4,0) to[short] (5,0)
	
	(7,4) to[short,-o] (8,4)
	(7,0) to[short,-o] (8,0)
	;
	
	\draw (-2,1) node[rxantenna,xscale=-1] (antenna) {};
	\draw(antenna.1) -- (sig.n);
	
	\draw (5,4.5) rectangle (7,-0.5) node[align=center] (A) at (6,2) {LPF\\{%
			\footnotesize Low Pass Filter}};
\end{circuitikz}

Επίσης, μπορούμε να χρησιμοποιήσουμε ένα φίλτρο που κόβει τον DC όρο,
ώστε από την τιμή \( 1+k_am(t) \) του αρχικού σήματος να καταλήξουμε στην επιθυμητή
\( k_a m(t) \). Για παράδειγμα, σε μια κυματομορφή που παριστάνει ήχο, μπορούμε να
κόψουμε τις συχνότητες κάτω από 20 Hz, μαζί με το χαμηλοπερατό φίλτρο που
τοποθετήσαμε παραπάνω:

\todo{Graph 20}

\paragraph{Πρόβλημα 1: Αργός πυκνωτής}
Αν ο πυκνωτής είναι πολύ αργός, μπορεί να μην προλάβει να έχει κατέβει αρκετά μέχρι την
επόμενη κορυφή, και έτσι να χαθεί κάποια πληροφορία του σήματος:

\todo{Graph 21}

Αυτό μπορεί να διορθωθεί βλέποντας ποιά είναι η μέγιστη ταχύτητα μεταβολή του σήματος, και
ρυθμίζοντας ανάλογα τις σταθερές της διαμόρφωσης και του αποδιαμορφωτή, ώστε να μην υπάρχει
περίπτωση κάποια κορυφή του AM να είναι κάτω από την τάση του πυκνωτή κάθε στιγμή.

\paragraph{Πρόβλημα 2: Υπερδιαμόρφωση}

Αν το αρχικό σήμα έχει πολύ μεγάλο πλάτος, δηλαδή
αν \( \left| k_a m(t) \right| > 1 \), τότε η αποδιαμόρφωση δεν θα δώσει το επιθυμητό
αποτέλεσμα, όπως είχαμε αναφέρει και παραπάνω:

\todo{Graph 22}

Αυτό μπορεί να διορθωθεί με διαφορετική επιλογή της σταθεράς \( k_a \).

\paragraph{Και άλλοι αποδιαμορφωτές}
Ο παραπάνω αποδιαμορφωτής, όπως και ο διαμορφωτής, λειτουργεί με χρήση ενός μη γραμμικού
στοιχείου, της διόδου.

\begin{tikzpicture}[baseline,scale=0.7,every node/.style={scale=.7}]
\draw (-2,0) -- (2,0) node[below] {$u_1(t)$};
\draw[->] (0,-1) -- (0,2) node[above] {$u_2(t)$};

\draw[very thick,blue!50!black] (-2,0) -- (0,0) -- (2,2);
\draw[very thick,blue!70!black] plot[variable=\x,domain=0:2,samples=\gsamples]
(\x,{\x*\x/1.7});
\end{tikzpicture}

Η συμπεριφορά της διόδου μπορεί να προσεγγιστεί με μια σχέση της μορφής \( y= ax^2+b \).
Οπότε, ας εξετάσουμε ένα σύστημα που εξάγει το τετράγωνο μιας κυματομορφής:

\begin{tikzpicture}[scale=1]
\draw (0,0) node[rectangle,draw,inner sep=5pt] (DM) {αποδιαμορφωτής τετραγωνικού νόμου};
\draw (DM.west) -- ++(-1,0) node[above right] {$u_1$};
\draw (DM.east) -- ++(1,0) node[above left] {$u_2$};

\draw (current bounding box.south)
node[below,yshift=-3mm] {$u_2(t) = a_1u_1(t) + a_2u_1^2(t)$};
\end{tikzpicture}

Γενικά, τέτοια μη γραμμικά συστήματα παράγουν πολλές συχνότητες, και μία από αυτές ίσως είναι
αυτή που επιθυμούμε.

Θα πραγματοποιήσουμε μια ανάλυση παρόμοια με τον διαμορφωτή, μελετώντας την έξοδο
του παραπάνω συστήματος στο πεδίο συχνότητας:

\todo{infobox importants}
\begin{align*}
	u_1(t) &= s(t) = A_c\left[ 1+k_am(t) \right]\cos(2π f_c t) \\
	u_2(t) &= a_1A_c\left[1+k_am(t)^2\right]\cos 2πf_c t
	+ a_2A_c^2\left[ 1+k_a m(t) \right]^2 \cos^2 2πf_c t \\
	&= a_1A_c \cos 2πf_ct \\
	&\hphantom{=} +a_1A_ck_am(t)\cos 2πf_c t \\
	&\hphantom{=} +a_2\frac{A_c^2}{2} \\
	&\hphantom{=} +2a_2\frac{A_c^2}{2}k_a m(t) \\
	&\hphantom{=} +a_2\frac{A_c^2}{2}k_a^2 m^2(t) \\
	&\hphantom{=} + a_2\frac{A_c^2}{2}\cos 2π2f_c t \\
	&\hphantom{=} + a_2\frac{A_c^2}{2} k_a m(t) \cos 2π2f_ct \\
	&\hphantom{=} + a_2\frac{A_c^2}{2}k_a^2 m^2(t) \cos 2π2f_ct
\end{align*}

Από μία ύψωση στο τετράγωνο δηλαδή προκύπτουν πολλές καινούριες συχνότητες:

\todo{Graph 24}

Φαίνεται, όπως είδαμε και στο προηγούμενο κύκλωμα, ο DC όρος στο μηδέν, τα ripples στις
υψηλότερες συχνότητες, αλλά και μία παραμόρφωση που οφείλεται στον όρο \( m^2(t) \), η
οποία, αφού προκύπτει από συνέλιξη του \( m(t) \) (εύρος ζώνης \( w \)) με τον εαυτό του,
έχει εύρος ζώνης:
\[
a_2\frac{A_c^2}{2}k_a^2 m^2(t)
\]

Για να μειωθεί η παραμόρφωση αυτή, πρέπει να μειώσουμε τον όρο \( k_a^2m^2(t) \), ή ισοδύναμα
τον \( k_a m(t) \):
\[
k_a^2m^2(t) \ll k_am(t) \ll 1
\]

\subsection{DSB-SC}
\subsubsection{Στο δρόμο για την κατανάλωση λιγότερης ισχύος}
Θυμόμαστε το σήμα:
\begin{align*}
	s(t) &=
	A_c\left[1+k_a m(t)\right]\cos 2πf_c t
	\\
	&= \underbrace{A_c \cos 2π f_c t} + A_c k_a m(t) \cos 2π f_c t
\end{align*}

Τι γίνεται αν αφαιρέσουμε τον όρο \( A_c \cos 2πf_c t \), ο οποίος
δεν περιέχει πληροφορία, αλλά καταναλώνει μόνο παραπάνω ισχύ (θυμόμαστε
ότι ο όρος αυτός υπάρχει για την αποδιαμόρφωση);

Τότε θα πάρουμε ένα άλλο σήμα:
\[
\boxed{s(t) = A_c m(t) \cos 2π f_c t}
\]
το οποίο ονομάζουμε διαμορφωμένο κατά \textbf{DSB-SC} (Double Side Band - Supressed Carrier).

Μετασχηματισμένο κατά Fourier:
\[
S(f) =
\frac{1}{2} A_c \left[
M(f-f_c) + M(f+f_c)
\right]
\]

Δηλαδή το σήμα εξόδου αποτελείται από το αρχικό σήμα, μετατοπισμένο
μόνο κατά τη συχνότητα:

\todo{Graph 26}

Στο πεδίο του χρόνου, το σήμα φαίνεται κάπως έτσι:
\todo{Graph 25}

Παρατηρούμε την αρχική κυματομορφή, η οποία αποκτά και αρνητικές τιμές,
με αποτέλεσμα η χρήση του αποδιαμορφωτή AM που χρησιμοποιήσαμε και
προηγουμένως να μην είναι εφικτή.

Στην πραγματικότητα, ο σχεδιασμός ενός αποδιαμορφωτή AM είναι
πιο δύσκολος.

\subsubsection{Αποδιαμορφωτής}
\label{dsbsc.demodulator}

Σχεδιάζουμε το κύκλωμα του αποδιαμορφωτή ως έναν πολλαπλασιαστή
του φέροντος με το διαμορφωμένο σήμα, φροντίζοντας να μην ξεχάσουμε
το φέρον να έχει την \textbf{κατάλληλη φάση} \( φ \) που να αντιστοιχεί
στη φάση του φέροντος του λαμβανόμενου σήματος:

\todo{Graph 27}

Τότε, με λίγα μαθηματικά έχουμε:
\begin{align*}
	u(t) &=
	s(t)\cdot c(t) =
	A_c \cos(2π f_c t + φ)A_C m(t)\cos(2πf_c t)
	\\ &=
	\frac{1}{2} A_c A_c'
	m(t) \cos(2π2f_ct + φ) + \frac{1}{2}A_cA_c' m(t)\cos φ
	\intertext{Και, εφαρμόζοντας ένα φίλτρο LPF που κόβει
		τις υψηλές συχνότητες \( 2π2f_c \):}
	\left. u(t) \right\lvert_{\mathrm{LPF}}
	&= \frac{1}{2} A_c A_c' m(t) \cos φ
\end{align*}

Στο τελικό αποτέλεσμα έχουμε το επιθυμητό \( m(t) \), και έναν
όρο \( \boxed{\cos φ} \). Όταν η γωνία \( φ \) (που εκφράζει τη διαφορά
φάσης μεταξύ του φέροντος του δέκτη και του πομπού) είναι 0, τότε
\( \cos φ = 1 \), και το σήμα έχει πλήρες πλάτος. Όταν έχουμε
\( φ = \pm \frac{π}{2} \) όμως, ο διαμορφωτής και ο
αποδιαμορφωτής δεν είναι συγχρονισμένοι, και δεν παίρνουμε καθόλου
σήμα.

Ο λόγος που ήταν δύσκολο να υλοποιηθούν τέτοια κυκλώματα ήταν
η έλλειψη φθηνών κυκλωμάτων συγχρονισμού τα οποία μπορούν να παρακολουθήσουν
τη φάση \( φ \). Η φάση του φέροντος μπορεί να επηρεαστεί από
εμπόδια που υπάρχουν στη διαδρομή του κύματος, κάτι που οδηγούσε και
στα φαινόμενα των \textit{διαλείψεων} στα παλιότερα ραδιόφωνα.
Για συγχρονισμό της φάσης μπορεί να χρησιμοποιηθεί ένα σύστημα
αυτομάτου ελέγχου PLL (Phase-Locked Loop).

Τελικά, το κύκλωμα προκύπτει:
\todo{Graph 28}

\subsubsection{Δακτυλιοειδής διαμορφωτής (ring modulator)}
Προκύπτει το ερώτημα πώς μπορούμε να υλοποιήσουμε κυκλωματικά
έναν πολλαπλασιαστή. Έστω ότι θέλουμε να πολλαπλασιάσουμε
ένα σήμα \( m(t) \) με ένα φέρον \( A_c\cos2π f_ct \).

Για αυτόν τον λόγο υπάρχει ένα κύκλωμα που ονομάζεται
\textbf{δακτυλιοειδής διαμορφωτής (ring modulator)}, με είσοδο
το \( m(t) \) και μια τετραγωνική κυματομορφή \( c(t) \) συχνότητας
\( f_c \):
\todo{Graph 30}

Αυτό το κύκλωμα ουσιαστικά εναλλάσει την αλλαγή ή όχι του προσήμου
της κυματομορφής εισόδου:
\todo{Graph 31}

Πρακτικά, πολλαπλασιάζει το \( c(t) \) με το \( m(t) \). Μαθηματικά,
παίρνουμε τη σειρά Fourier του \( c \) και βλέπουμε:
\begin{align*}
	c(t) &= \frac{4}{π}
	\sum_{n=1}^{\infty}
	\frac{(-1)^{n-1}}{2n-1}\cos\left[
	2πf_c(2n-1)t
	\right] \implies \\
	m(t)c(t) &= \frac{4}{π}m(t)
	\sum_{n=1}^{\infty}
	\frac{(-1)^{n-1}}{2n-1}\cos\left[
	2πf_c(2n-1)t
	\right]
\end{align*}

Ακριβώς όπως μελετήσαμε τον διαμορφωτή και τον αποδιαμορφωτή AM,
ίσως μέσα στις συχνότητες της παραπάνω συνάρτησης υπάρχει και το
σήμα που θέλουμε:
\begin{alignat*}{2}
	n=1\qquad && \infoboxed{m(t)\frac{4}{π}\cos2πf_c t}\\
	n=2\qquad && m(t)\frac{4}{π}\cos2π3f_c t\\
	n=3\qquad && m(t)\frac{4}{π}\cos2π5f_c t
\end{alignat*}

\todo{graph fourier output}

Επομένως, παίρνουμε ένα band pass φίλτρο μόνο για τις συχνότητες
του \( n=1 \) και προκύπτει η ζητούμενη έξοδος \( m(t)\frac{4}{π}
\cos2πf_c t \).

Αυτά τα κυκλώματα, σε συνδυασμό με το Band Pass Filter, είναι
διαθέσιμα στο εμπόριο και ονομάζονται \textbf{μίκτες (mixers)}.

Να σημειωθεί βέβαια πως για να λειτουργήσει σωστά αυτή η διάταξη,
πρέπει το κύκλωμα και τα χαρακτηριστικά των στοιχείων του
(δίοδοι, μετασχηματιστές) να είναι συμμετρικά.

Εναλλακτικά, μπορεί να χρησιμοποιηθεί για το ίδιο αποτέλεσμα
ένα κύκλωμα που ονομάζεται double-balanced modulator και λειτουργεί
με δύο όμοιους διαμορφωτές AM:

\todo{Graph 33}

\subsubsection{Δέκτης Costas}
Θυμόμαστε ότι για ένα σήμα:
\[
s(t) = A_cm(t) \cdot \cos(2πf_ct + φ)
\]
μπορούμε εύκολα να βρούμε τον όρο \( A_c' \cos (2πf_ct) \), αλλά όχι
τον όρο \( A_c'\cos(2πf_c t + φ) \) (εκτός ίσως αν τον επανεκπέμψουμε μόνο του από την πλευρά του πομπού με διαφορετική, π.χ διπλάσια συχνότητα, κάτι που δεν εφαρμόζεται επειδή καταναλώνονται κι άλλες
συχνότητες).

Σχεδιάζουμε έναν νέο δέκτη, ο οποίος αποτελείται από δύο απλούς
αποδιαμορφωτές [\autoref{dsbsc.demodulator}]:

\todo{Graph 45}

Ο δέκτης αυτός ονομάζεται \textbf{δέκτης Costas}, και αποτελείται
από έναν ταλαντωτή \( \cos(2π f_c t + φ) \), και δύο κλάδους
αποδιαμορφωτών, από τους οποίους ο ένας πολλαπλασιάζεται με φέρον
φάσης \( φ \), και ο δεύτερος με φέρον φάσης \( φ-90\degree \).
Στη συνέχεια, τα δύο σήματα διαιρούνται ώστε να βρούμε τη γωνία
\( φ \approx \tan φ = \frac{\cos φ}{\sin φ}
= \frac{\sfrac{1}{2}A_c \cos φ m(t) }{\sfrac{1}{2} A_c \sin φ m(t) } \). Η γωνία αυτή πηγαίνει ως είσοδος στον ταλαντωτή, έτσι ώστε να
διορθωθεί η φάση του σήματος που δίνει ως έξοδο μέσω μιας διαδικασίας
αρνητικής ανάδρασης.






\end{document}
