\documentclass[11pt,a4paper,notitlepage,fleqn,draft]{article}

\input{preamble.tex}

\title{ΣΑΕ 1
	\\
	{ 
		\normalsize Συστήματα Αυτομάτου Ελέγχου I
		\\
		\normalsize Σημειώσεις από τις παραδόσεις
	}}
\date{Οκτώβριος-Ιανουάριος 2017
	\\
	{ 
		\small Τελευταία ενημέρωση: \today
	}
}
\author{
	Για τον κώδικα σε \LaTeX, ενημερώσεις και προτάσεις:
	\\
	\url{https://github.com/kongr45gpen/ece-notes}}

\setallmainfonts(Digits,Latin,Greek){Asana Math}
\setmainfont{Noto Serif}
\setsansfont{Ubuntu}
\usepackage{polyglossia}
\newfontfamily\greekfont[Script=Greek,Scale=1.00]{Liberation Serif}

\hypersetup{pdftitle = {ΣΑΕ 1}}


\begin{document}
\maketitle

\hrule
\vspace{50pt}
	
Συστήματα Αυτομάτου Ελέγχου
	
Υπεύθυνη καθηγήτρια: Ζωή Δουλγέρη, ασκήσεις από τον Παπαγεωργίου Δημήτρη - δεν υπάρχει διαχωρισμός ασκήσεων και θεωρίας.

\section{Συστήματα}
Γνωρίζουμε από τα προηγούμενα μαθήματα τι είναι το σύστημα. Σκοπός του μαθήματος είναι να σχεδιάσουμε έναν "ελεγκτή" ώστε ένα σύστημα να έχει μια επιθυμητή έξοδο.

Για παράδειγμα, αν έχουμε έναν κινητήρα που επιθυμούμε να ελέγξουμε, μπορούμε να τον παραστήσουμε με το παρακάτω σχήμα:

\begin{tikzpicture}
\draw (0,0) rectangle (1,1) node[midway] {$\Sigma$};
\draw[->] (1,0.5) -- ++(1,0) node[right] {$y$};
\draw (1.5,0.5) -- (1.5,-1) -- (0,-1);
\draw (0,-0.75) rectangle (-0.5,-1.25) node[midway] {$H$};
\draw[->] (-0.5,-1) -- (-2,-1) -- (-2,0.25);
\draw (-2,0.5) circle (0.25);
\draw[->] (-3,0.5) -- (-2.25,0.5) node[above,midway] {$r$};
\draw (-1.35,0.25) rectangle (-0.65,0.85) node[midway] {$E$};
\draw (-1.75,0.5) -- (-1.35,0.5) ;
\draw (-0.65,0.5) -- (0,0.5) node[above left] {$u$};
\end{tikzpicture}

όπου:
\begin{itemize}
	\item \( \Sigma \) είναι ο κινητήρας
	\item \( u \) είναι η τάση εισόδου (που ρυθμίζουμε εμείς)
	\item \( y \) είναι η έξοδος του συστήματος, εδώ η ταχύτητα του κινητήρα
	\item Η ροπή του φορτίου εκφράζει την είσοδο της διαταραχής
	\item \( H \) είναι ένας μετρητής που μπορούμε να έχουμε για να ελέγχουμε την ταχύτητα
	του κινητήρα
	\item \( E \) είναι ο ελεγκτής που θέλουμε να υλοποιήσουμε, ώστε να ρυθμίζει την
	τάση \( u \) εισόδου του κινητήρα για να πετύχουμε την επιθυμητή ταχύτητα.
\end{itemize}

Έχουμε και μία \textbf{είσοδο αναφοράς} που καθορίζει την επιθυμητή έξοδο του συστήματος.

Στα πλαίσια των ΣΑΕ βρίσκουμε το μαθηματικό μοντέλο του συστήματος, καθώς και το μαθηματικό
μοντέλο του ελεγκτή, και τα υλοποιούμε με φυσικό τρόπο (για παράδειγμα μέσω κυκλωματικών
στοιχείων, μικροελεγκτών, arduino κ.ά).

Παραδείγματα συστημάτων αυτομάτου ελέγχου είναι: Τα αμορτισέρ του αυτοκινήτου, οι κινητήρες
των CD drives, οι κινητήρες των γραμμών παραγωγής (ώστε για παράδειγμα να είμαστε σίγουροι
ότι τα υλικά περνάν από έναν κλίβανο ακριβώς για 30 λεπτά, διατηρώντας σταθερή την
ταχύτητα μεταφοράς τους), κ.ά.

\subsection{Μοντελοποίηση συστημάτων}
\paragraph{}
Για το σύστημα ενός σώματος στο οποίο ασκείται δύναμη, έχουμε πολύ απλά:
\[
	F = m\ddot x
\]

Για μια δύναμη ελατηρίου, ισχύει \( F = \kappa \cdot \delta x \), και για μια δύναμη
απόσβεσης/ιξώδους: \( F = d\dot x \)

\paragraph{Ανάρτηση αυτοκινήτου}
Θεωρούμε ότι η ανάρτηση ενός αυτοκινήτου αποτελείται από ένα ελατήριο και έναν αποσβεστήρα:

\begin{tikzpicture}
\draw (0,0) rectangle (2,1) node[midway] {$m$};
\draw (0.5,0) -- ++(0,-0.4)
-- ++(-30:0.2)
-- ++(-150:0.4)
-- ++(-30:0.4)
-- ++(-150:0.4)
-- ++(-30:0.4)
-- ++(-150:0.4)
-- ++(-30:0.2)
-- (0.5,-2);
;
\draw (1.5,0) -- (1.5,-1);
\draw (1.25,-1) -- (1.75,-1);
\draw (1.1,-0.9) -- (1.1,-1.2) -- (1.9,-1.2) -- (1.9,-0.9);
\draw (1.5,-1.2) -- (1.5,-2);

\draw (-0.5,-2) -- (2.5,-2);
\draw[gray] (2.5,1.2) -- (2.5,-2.7);

\draw (1,-2) -- (1,-2.5);
\filldraw (1,-2.5) circle(1pt) node[below left] {$\rho$};

\draw[dashed] (0.5,0) -- (3,0) node[right] {$x_0$};
\draw[dashed] (0.5,-2) -- (3,-2) node[right] {$x_i$};
\end{tikzpicture}

Και όπως πριν προκύπτει η σχέση:
\[
m\ddot x_0 + b(\dot x_0 - \dot x_i) + \kappa (x_0-x_i) = 0
\]
η οποία μπορεί να μετασχηματιστεί κατά Laplace:
\begin{align*}
	m\ddot x_0 + b\dot x_0 + \kappa x_0 &= b\dot x_i + \kappa \dot x_i \\
	ms^2X_0(s) + bsX_0(s) + \kappa X_0(s) &= X_1(s)bs + \kappa X_1(s) \\
	\Aboxed{\frac{X_0(s)}{X_1(s)} &= \frac{bs+\kappa}{ms^2+bs+\kappa} }
\end{align*}

Αυτή είναι μία απλή μέθοδος μοντελοποίησης συστημάτων, αλλά η μοντελοποίηση δεν είναι
αντικείμενο αυτού του μαθήματος.

\subsection{Ορισμοί}

\begin{defn}{}{}
	\begin{itemize}
	\item
	\textbf{Συνάρτηση μεταφοράς:} \(
	\displaystyle G(s) = \frac{Y(s)\quad\text{\small (έξοδος)}}{U(s) \quad
		\text{\small (είσοδος)} }
	= \frac{N(s)\quad \text{\small (αριθμητής)}}{D(s)\quad \text{\small (παρονομαστής)} }
	\)
	\item \textbf{Χαρακτηριστικό πολυώνυμο:} \( D(s) \)
    \end{itemize}
\end{defn}
Θυμόμαστε ότι στα φυσικά συστήματα δεν γίνεται να έχουμε βαθμό του αριθμητή μεγαλύτερο από
το βαθμό του παρονομαστή.
\begin{defn}{Μορφές έκφρασης συνάρτησης μεταφοράς}{}
	\begin{align*}
		H(s) &= \frac{K(s+z_1)\cdots(s+z_m)}{(s+p_1)\cdots(s+p_n)} \\
		H(s) &= \frac{G(1+s\tau_{n+1})\cdots(1+s\tau_{n+m})}{(1+s\tau_1)\cdots(1+s\tau_n)}
		\quad \text{όπου } G=\frac{kz_1\cdots z_m}{p_1\cdots p_m}
	\end{align*}
\end{defn}
\begin{defn}{}{}
	\begin{itemize}
    \item \textbf{Πόλοι} ονομάζονται οι τιμές \( p \) για τις οποίες ισχύει:
    \[
    \mathlarger{\lim_{s\to p}  \left\lvert H(s) \right\rvert} = \infty
    \]
    \item \textbf{Μηδενικά} ονομάζονται οι τιμές \( z \) για τις οποίες ισχύει:
    \[
    \mathlarger{\lim_{s\to z}  \left\lvert H(s) \right\rvert} = 0
    \]
    \end{itemize}
\end{defn}
\begin{theorem}{Σύνδεση εν σειρά}{}
	Όταν συνδέουμε δύο απομονωμένα συστήματα εν σειρά, για τις συναρτήσεις μεταφοράς τους
	ισχύει:
	\[
	G(s) = G_1(s)G_2(s)
	\]
	
	\begin{center}
	\begin{tikzpicture}[scale=1.2]
	\draw[->] (0,0) -- (1,0) node[above,midway] {$X_1(s)$};
	\draw (1,-0.3) rectangle (2,0.3) node[midway] {$G_1(s)$};
	\draw (2,0) -- (3,0) node[above,midway] {$X_2(s)$};
	\draw (3,-0.3) rectangle (4,0.3) node[midway] {$G_2(s)$};
	\draw[->] (4,0) -- (5,0) node[above,midway] {$X_3(s)$};
	\end{tikzpicture}
    \end{center}
\end{theorem}
\paragraph{Παράδειγμα} \hspace{0pt}


\begin{circuitikz}[american,scale=1.4]
	\ctikzset{bipoles/thickness=3}
	\draw (0,2) to [V=$u(s)$] (0,0);
	\draw[color=green!50!black] (0,2)
	to[R=$R_1$] (2,2)
	to[C=$C_1$] (2,0)
	-- (0,0);
	
	\draw[color=green!50!cyan!50!black] (2,2)
	to[R=$R_2$] (4,2)
	to[C=$C_2$] (4,0)
	-- (2,0);
	
	\draw (4,2) to[short,-*] (5,2);
	\draw (4,0) to[short,-*] (5,0);
	\draw (5,2) to[open, v^=$y$] (5,0);
\end{circuitikz}

Για το παραπάνω κύκλωμα, αν και έχουμε δύο συστήματα ενωμένα σε σειρά, δεν μπορούμε να
εφαρμόσουμε το θεώρημα στο παραπάνω κύκλωμα, αφού τα επιμέρους κυκλώματα δεν είναι απομονωμένα
και παρουσιάζουν σύνθετες αντιστάσεις εισόδου και εξόδου. Πράγματι, αν επιλύσουμε το
κύκλωμα:
\begin{align*}
	G_1(s)G_2(s) &= \frac{1}{(R_1C_1s+1)}\frac{1}{(R_2C_2s+1)} \\
	\frac{y(s)}{u(s)} &= \frac{1}{R_1C_1R_2C_2s^2+(R_1C_1+R_2C_2+\underline{R_1C_2})s+1}
\end{align*}
Παρατηρούμε τον όρο \( R_1C_2s \) που δεν υπάρχει στον απλό πολλαπλασιασμό των δύο
συστημάτων.

\subsection{Σύστημα κλειστού βρόγχου}

\begin{tikzpicture}[scale=1.3]
\draw[->] (-0.25,0) -- (0.5,0) node[above,midway] {$r(s)$};
\draw (0.75,0) circle (0.25);
\draw (1,0) -- ++(0.5,0) node[above,midway,green!50!black,scale=0.8] {$w(s)$};
\draw (1.5,-0.5) rectangle (3,0.5) node[midway] {$G(s)$};
\draw (3,0) -- (3.75,0);
\draw (4,0) circle (0.25);
\draw[->] (4.25,0) -- ++(1,0) node[above right] {$y$};

\draw[<-] (4,0.25)  node[left] {$+$} --++ (0,0.5)
node[above,rectangle,align=center,scale=0.8]
{είσοδος\\διαταραχής\\$d(s)$};

\draw (4.5,0) -- ++(0,-1.5) -- (3,-1.5);
\draw (1.5,-2) rectangle (3,-1) node[midway] {$H(s)$};
\draw (1.5,-1.5) -- (0.75,-1.5) node[above,midway,green!50!black,scale=0.8] {$f(s)$} 
-- ++(0,1.25);
\end{tikzpicture}

Ορίζουμε:
\begin{alignat*}{2}
	\text{συνάρτηση μεταφοράς κλειστού βρόγχου: } && T(s) &= \frac{y(s)}{r(s)} \\
	\text{συνάρτηση μεταφοράς εισόδου διαταραχής: } && T_d(s) &= \frac{y(s)}{d(s)}
\end{alignat*}

Για να υπολογίσουμε την έξοδο του συστήματος, αν δεν λάβουμε υπ' όψιν
την είσοδο διαταραχής:
\begin{align*}
	y(s) &= G(s)w(s)
	\\ &= G(s)\left( r(s)-f(s) \right) \\
	y(s) &= G(s)\left[ r(s)-H(s)y(s) \right] \\
	y(s)\left[1+G(s)H(s)\right] &= G(s)r(s) \\
	y(s) &= \frac{G(s)r(s)}{1+G(s)H(s)} \\
	T(s) &= \frac{G(s)}{1+G(s)H(s)}
\end{align*}

Αν συμπεριλάβουμε και την είσοδο διαταραχής, το ζητούμενο είναι η είσοδος αυτή να μην
επηρεάζει καθόλου (ή όσο το δυνατόν λιγότερο) την έξοδο. Μετά από τις πράξεις:
\begin{align*}
	T_d(s) &= \frac{Y(s)}{d(s)} = \frac{1}{1+G(s)H(s)}
\end{align*}

Παρατηρούμε ότι το χαρακτηριστικό πολυώνυμο είναι το ίδιο στις δύο συναρτήσεις μεταφοράς.

\paragraph{Παράδειγμα} \hspace{0pt}

\begin{tikzpicture}
\draw[->] (-0.25,0) -- (0.5,0) node[above,midway] {$r(s)$};
\draw (0.75,0) circle (0.25);
\draw (1,0) -- ++(0.5,0);
\draw (1.5,-0.5) rectangle (3,0.5) node[midway] {$\displaystyle\frac{\kappa}{s+a}$};
\draw (3,0) -- (4,0);
\draw[->] (4,0) -- ++(1,0) node[above right] {$y$};

\draw (4,0) -- ++(0,-1.5) -- (3,-1.5);
\draw[dashed] (3,-1.5) -- (1.5,-1.5);
\draw (1.5,-1.5) -- (0.75,-1.5) -- ++(0,1.25) node[below right] {$-$};
\end{tikzpicture}

Θα υπολογίσουμε την έξοδο του συστήματος \underline{χωρίς ανάδραση} και \underline{με ανάδραση} σε βηματική είσοδο \( r(s) \rightarrow \mathrm u(t) \).
\subparagraph{Χωρίς ανάδραση} \hspace{0pt}

Το σύστημα χωρίς ανάδραση είναι το παραπάνω χωρίς τον κάτω βρόχο:
\begin{tikzpicture}[baseline,scale=0.7]
\draw[->] (-0.25,0) -- (0.5,0) node[above,midway] {$r(s)$};
\draw (0.75,0) circle (0.25);
\draw (1,0) -- ++(0.5,0);
\draw (1.5,-0.5) rectangle (3,0.5) node[midway] {$\frac{\kappa}{s+a}$};
\draw (3,0) -- (4,0);
\draw[->] (4,0) -- ++(1,0) node[above right] {$y$};
\end{tikzpicture}

Και ισχύει:
\begin{align*}
	y(s) &= r(s)\frac{\kappa}{s+a} \\
	y(s) &= \kappa\frac{1}{s}\frac{1}{s+a} \\
	y(t) &= \kappa\left( 1-e^{\sfrac{-t}{\tau}} \right)
\end{align*}
(όπου η σταθερά χρόνου \( \tau = \frac{1}{a} \))

Για \( t\to \infty \) το αποτέλεσμα είναι \( y(t) = \kappa \).

\subparagraph{Με ανάδραση}
\begin{align*}
	y(s) &= \frac{G(s)r(s)}{1+G(s)} \implies \dots \implies
	\tau' = \frac{1}{a+\kappa}
\end{align*}
Παρατηρούμε πως το σύστημα αυτό φτάνει πολύ πιο γρήγορα στην τελική του τιμή. Αυτό φαίνεται
αν συγκρίνουμε τις σταθερές χρόνου μεταξύ τους, σκεπτόμενοι ότι λειτουργούν ως συντελεστές
στην εκθετική συνάρτηση:

\begin{tikzpicture}
\draw (-2,0) -- (2,0);
\draw (0,-2) -- (0,2);

\draw (-1.5,0) node[cross=4pt,thick,blue] {} node[below,yshift=-1mm] {$-a-\kappa$};
\draw (-0.5,0) node[cross=4pt,thick,yellow!50!brown!50!red] {} node[above,yshift=1mm] {$-a$};

\begin{scope}[xshift=4cm]
\draw (-1,0) -- (3,0);
\draw (0,-2) -- (0,2);

\draw [very thick, color=blue, domain=0:3,variable=\t, samples=\gsamples, smooth]
plot (\t,{ 1-exp(-\t) }) node[below] {$-a$};
\draw [very thick, color=yellow!50!brown!50!red, domain=0:3,variable=\t, samples=\gsamples, smooth]
plot (\t,{ 1-exp(-5*\t) }) node[above,xshift=-2cm] {$-a-k$};
\end{scope}
\end{tikzpicture}

\subsection{Ισοδύναμα λειτουργικά διαγράμματα}
Για τη διευκόλυνσή της εύρεσης της συνάρτησης μεταφοράς, μπορούμε αντί να βρούμε την έξοδο
αλγεβρικά χρησιμοποιώντας ενδιάμεσες συναρτήσεις, να εφαρμόσουμε κανόνες όπως τους
παρακάτω:
\begin{infobox}{}
	\begin{itemize}
		\item
		\begin{tikzpicture}[scale=1.3,baseline]
		\begin{scope}[yshift=2mm]
		\draw[->] (0,0) -- (0.75,0);
		\draw (0.75,-0.7/2) rectangle ++(1,0.7) node[midway] {$H$};
		\draw[->] (1.75,0) -- (2.5,0) node[right] {$y_1$};
		\draw[->] (2,0) -- (2,-0.5) -- (2.5,-0.5) node[right] {$y_2$};
		\end{scope}
		
		\draw[->,very thick,gray!20!black] (4,0) to[bend left=10] ++(1.5,0);
		
		\begin{scope}[xshift=6.5cm]
		\draw (0,0) -- (0.5,0);
		\draw (0.5,0) -- (0.5,0.3) -- (1,0.3);
		\draw (0.5,0) -- (0.5,-0.3) -- (1,-0.3);
		\draw (1,-0.5) rectangle (1.7,-0.1) node[midway] {$H$};
		\draw[->] (1.7,-0.3) -- ++(0.5,0) node[right] {$y_2$};
		\draw (1,0.5) rectangle (1.7,0.1) node[midway] {$H$};
		\draw[->] (1.7,0.3) -- ++(0.5,0) node[right] {$y_1$};
		\end{scope}
		\end{tikzpicture}
		\item
		\begin{tikzpicture}[scale=1.3,baseline]
		\begin{scope}[]
		\draw[->] (0,0) -- (0.75,0) node[above,midway] {$u$};
		\draw (0.75,0) -- (0.75,0.5) -- (1.25,0.5);
		\draw (1.25,0.5-0.7/2) rectangle ++(1,0.7) node[midway] {$H$};
		\draw[->] (2.25, 0.5) -- (2.75,0.5) node[right] {$y$};
		\draw[->] (0.75,0) -- (0.75,-0.5) -- (2.75, -0.5) node[right]{$y_1$};
		\end{scope}
		
		\draw[->,very thick,gray!20!black] (4,0) to[bend left=10] ++(1.5,0);
		
		\begin{scope}[xshift=6.5cm,yshift=0.3cm]
		\draw[->] (0,0) -- (0.75,0) node[above,midway] {$u$};
		\draw (0.75,-0.5/2) rectangle ++(0.75,0.5) node[midway] {$H$};
		\draw[->] (1.5,0) -- (2.25,0) node[right] {$y$};
		\draw[->] (1.75,0) -- (1.75,-0.5) -- (2.25,-0.5);
		\draw (2.25,-0.5-0.5/2) rectangle ++(0.75,0.5) node[midway] {$\frac{1}{H}$};
		\draw[->] (3,-0.5) -- ++(0.5,0) node[right] {$y_1$};
		\end{scope}
		\end{tikzpicture}
		\item
		\begin{tikzpicture}[scale=1.3,baseline]
		\begin{scope}[]
		\draw[->] (0,0.5) -- ++(0.75,0);
		\draw (0.75,0.5-0.5/2) rectangle ++(0.75,0.5) node[midway] {$H_1$};
		\draw[->] (1.5,0.5) -- (2.25,0.5) -- (2.25,0.2) node[right,yshift=1mm,xshift=1mm] {$+$};
		\draw[->] (0,-0.5) -- ++(0.75,0);
		\draw (0.75,-0.5-0.5/2) rectangle ++(0.75,0.5) node[midway] {$H_2$};
		\draw[->] (1.5,-0.5) -- (2.25,-0.5) -- (2.25,-0.2);
		\draw (2.25,0) circle (2mm);
		\draw[->] (2.45,0) -- ++(0.75,0) node[above,pos=.9] {$y$};
		\end{scope}
		
		\draw[->,very thick,gray!20!black] (4,0) to[bend left=10] ++(1.5,0);
		
		\begin{scope}[xshift=6.5cm]
		\draw[] (0,0.5) -- ++(0.6,0);
		\draw (0.6,0.5-0.5/2) rectangle ++(1,0.5) node[midway] {$\sfrac{H_1}{H_2}$};
		\draw[->] (1.6,0.5) -- (2.25,0.5) -- (2.25,0.2) node[right,yshift=1mm,xshift=1mm] {$+$};
		\draw[->] (0,-0.5) -- (2.25,-0.5) -- (2.25,-0.2);
		\draw (2.25,0) circle (2mm);
		\draw (3.05,-0.4/2) rectangle ++(0.8,0.4) node[midway] {$H_2$};
		\draw[] (2.45,0) -- ++(0.6,0);
		\draw[->] (3.85,0) -- ++(0.6,0) node[right] {$y$};
		\end{scope}
		\end{tikzpicture}
	\end{itemize}
\end{infobox}

\paragraph{Παράδειγμα} \hspace{0pt}

\begin{tikzpicture}
\def\h{0.6}
\def\l{1}
\def\ll{0.75}
\draw[->] (0,0) node[green!70!black,scale=.8,opacity=.8,left] {$r(s)$} -- (1.5-0.2,0);
\begin{scope}[xshift=1.5cm]
\draw (0,0) circle (2mm);
\draw (0.2,0) -- ++(0.75,0);
\draw (0.2+0.75, -\h/2) rectangle ++(\l, \h) node[midway] {$H_1$};
\draw[->] (\l+0.2+0.75,0) -- (2.8,0) node[green!70!black,scale=.8,opacity=.8,above,midway] {$w(s)$};
\draw (3,0) circle (2mm);
\end{scope}
\begin{scope}[xshift=4.5cm]
\draw (0.2,0) -- ++(0.75,0);
\draw (0.2+0.75, -\h/2) rectangle ++(\l, \h) node[midway] {$H_2$};
\draw[] (\l+0.2+0.75,0) -- (3.5,0) node[right] {$y(s)$};
\end{scope}

\draw (0.5,0) -- ++(0,1.5) -- (4.5,1.5) -- (4.5,1);
\draw (4.5-\ll/2,1) rectangle (4.5+\ll/2,0.6) node[midway] {$\kappa$};
\draw[->] (4.5,0.6) -- (4.5,0.2) node[right,xshift=1mm,yshift=1mm] {$+$};

\draw[->] (4.5+2.5,0) -- ++(0,-1.5) -- (1.5,-1.5) -- (1.5,-0.2) node[right,xshift=1mm,yshift=-1mm] {$-$};
\end{tikzpicture}

Χρησιμοποιώντας τους παραπάνω κανόνες, ή την προηγούμενη μέθοδο, μπορούμε να βρούμε:
\[
T(s) = \frac{\kappa H_2(s)+H_2(s)H_1(s)}{1+H_2(s)}
\]

Ενδεικτικά, με βοηθητικές συναρτήσεις, οι πράξεις γίνονται ως εξής:
\begin{align*}
	y(s) &= H_2(s)\cdot\left( \kappa r(s) + w(s) \right)
	\\ &= H_2 \cdot \left[ \kappa r + H_1 \left( r - y \right) \right]
	\\ &= \kappa H_2 r + H_2H_1r - H_2y \implies
	\\ y \cdot (1+H_2) &= \kappa H_2 r + H_2H_1 r \implies
	\\ y &= \frac{\kappa H_2 r + H_2H_1 r}{1+H_2} \implies
	\\ T(s) &= \frac{\kappa H_2(s) + H_2(s)H_1(s) }{1+H_2(s)}
\end{align*}


\subsection{Προδιαγραφές}
Ορίζουμε κάποιες προδιαγραφές που επιθυμούμε να πληροί η έξοδος του συστήματος, όπως η
ακρίβεια θέσης, η ταχύτητα της απόκρισης, η ευστάθεια κλπ. Για να μετρήσουμε ποσοτικά αυτά
τα κριτήρια, ορίζουμε νέα μεγέθη και χρησιμοποιούμε διάφορες συναρτήσεις ως
"εισόδους αναφοράς", όπως την κρουστική \( \delta(t) \) (για μελέτη ευστάθειας),
τη βηματική \( \mathrm u(t) \), την ράμπα, την ημιτονοειδή (για μελέτη
απόκρισης συχνότητας και ταχύτητας) κλπ.

\subsubsection{Ακρίβεια}
Το ζητούμενο της ακρίβειας είναι η τελική έξοδος να είναι κοντά στην επιθυμητή είσοδο.

Για να υπολογίσουμε την τελική έξοδο, δεν χρειάζεται να υπολογίσουμε τον αντίστροφο Μ/Σ
Laplace της συνάρτησης για να πάμε στο πεδίο του χρόνου, αλλά αρκεί να χρησιμοποιηθεί το θεώρημα της τελικής τιμής:
\[
f(\infty) = \lim_{s\to 0} sF(s)
 \]

Για παράδειγμα, για βηματική είσοδο (\( \mathrm u(t) \rightarrow \frac{1}{s}\))
σε ένα σύστημα (ss = steady state):
\begin{align*}
	y_{\mathrm{ss}} &= \lim_{s\to 0} sF(s) = \lim_{s\to 0} sH(s)\frac{1}{s} =
	\lim_{s\to 0} H(s)
\end{align*}

\begin{comment}
\begin{tikzpicture}
\def\h{0.6}
\def\l{1.2}
\def\ll{0.75}
\draw[->] (0,0) node[left] {$r(s)$} -- (1-0.2,0);
\begin{scope}[xshift=1cm]
\draw (0,0) circle (2mm);
\draw (0.2,0) -- ++(0.75,0);
\draw (0.2+0.75, -\h/2) rectangle ++(\l, \h) node[midway] {$G_1(s)$};
\draw (\l+0.2+0.75,0) -- (3,0);
\draw  (3, -\h/2) rectangle ++(\l, \h) node[midway] {$G_2(s)$};
\draw (3+\l,0) -- (5-0.2,0);
\draw[->] (5,1) -- ++(0,-1+0.2) node[midway,right] {$d(s)$};
\draw (5,0) circle (2mm);
\draw[->] (5+0.2,0) -- ++(1,0) node[right] {$y$};
\end{scope}

\draw[->] (4.5+2.2,0) -- ++(0,-1.5) -- (4,-1.5);
\draw (4,-1.5-\h/2) rectangle ++(-\l,\h) node[midway] {$H(s)$};
\draw[->] (4-\l,-1.5) -- (1,-1.5) -- (1,-0.2);
\end{tikzpicture}
\end{comment}

Για να μελετήσουμε την ακρίβεια, ορίζουμε το σφάλμα:
\begin{defn}{Σφάλμα}{}
	\[
	e(s) = r(s) - y(s)
	\]
\end{defn}

Χρησιμοποιούμε διάφορες εισόδους για να βρούμε διάφορα είδη σφαλμάτων του συστήματος:
\todo{graphs}
\begin{alignat}{4}
y(t) = \delta(t) &&\quad y(s) = \frac{1}{s} &\qquad e_{\mathrm ssp} && \quad{\text{σφάλμα θέσης}} \\
y(t) = t &&\quad y(s) = \frac{1}{s^2} &\qquad e_{\mathrm ssv} && \quad{\text{σφάλμα ταχύτητας}} \\
y(t) = \sfrac{t^2}{2} &&\quad y(s) = \frac{1}{s^3} &\qquad e_{\mathrm ssa} && \quad{\text{σφάλμα επιτάχυνσης}}
\end{alignat}

Για παράδειγμα, για το σύστημα κλειστού βρόγχου, θυμόμαστε ότι:

\begin{tikzpicture}[scale=0.8]
\draw[->] (-0.25,0) -- (0.5,0) node[above,midway] {$r(s)$};
\draw (0.75,0) circle (0.25);
\draw (1,0) -- ++(0.5,0);
\draw (1.5,-0.5) rectangle (3,0.5) node[midway] {$H(s)$};
\draw (3,0) -- (3.75,0);
\draw[->] (3.25,0) -- ++(1,0) node[above right] {$y$};

\draw (3.6,0) -- ++(0,-1.5) -- (3,-1.5);
\draw (1.5,-2) rectangle (3,-1) node[midway] {$G(s)$};
\draw[->] (1.5,-1.5) -- (0.75,-1.5) -- ++(0,1.25) node[right,xshift=1mm,yshift=-1mm] {$-$};
\end{tikzpicture}

\begin{align*}
	\frac{y(s)}{r(s)} &= \frac{H(s)}{1+H(s)} \\
	\text{όπου } H(s) &=
	\frac{G(τ_{n+1}s+1)\cdots(τ_{n+m}s+1)}{s^N(1+sτ_1)\cdots(1+sτ_n)} \implies\\
	e(s) &= r(s)-y(s) = \frac{1}{1+H(s)}r(s).
\end{align*}
(δηλαδή \( N \) είναι η τάξη του τυχόν πόλου στο 0).

Εφαρμόζοντας τις διάφορες συναρτήσεις ως εισόδους, σύμφωνα με τα παραπάνω, έχουμε:
\begin{align*}
	e_{\mathrm{ssp}} &= \frac{1}{\displaystyle 1+\underbrace{\lim_{s\to 0}H(s)}_{K_p}}
	= \frac{1}{1+K_p}
	= \begin{cases}
	\frac{1}{1+G} \qquad &\text{για } N = 0 \\
	\frac{1}{1+\infty} = 0 \qquad &\text{για } N \geq 1
	\end{cases}
	\\
	e_{\mathrm{ssv}} &= \frac{1}{\displaystyle \underbrace{\lim_{s\to 0} sH(s)}_{K_v} }
	= \frac{1}{K_v} =
	\begin{cases}
	\frac{1}{0} = \infty \qquad &\text{για } N = 0
	\\
	\frac{1}{G}\qquad &\text{για } N=1
	\\
	\frac{1}{\infty} = 0\qquad &\text{για } N\geq 2
	\end{cases}
	\\
	e_{\mathrm{ssa}} &= \dots = \begin{cases}
	\infty \qquad &\text{για } N \leq 1 \\
	\frac{1}{G} \qquad &\text{για } N = 2 \\
	0 \qquad &\text{για } N > 2
	\end{cases}
\end{align*}

Πρακτικά, για να έχουμε μηδενικό σφάλμα και δηλαδή πλήρη ακρίβεια θέσης, θέλουμε στη βηματική
είσοδο η έξοδος να είναι μηδενική.

\paragraph{Παράδειγμα}
Έστω το σύστημα:

\todo{Graph 11}

Ποιά θα είναι η έξοδος του συστήματος στη μόνιμη κατάσταση αν προσθέσουμε την είσοδο
διαταραχής;

\subparagraph{}

Γνωρίζουμε για το σύστημα κλειστού βρόχου ότι:
\begin{align*}
	\frac{y(s)}{d(s)} &= \frac{1}{1+H(s)} \\
	\lim_{s\to 0}sy(s) &= \lim_{s\to 0} s\frac{d(s)}{1+H(s)}
	= \lim_{s\to 0} s\frac{\frac{1}{s}}{1+H(s)} = \lim_{s\to 0}\frac{1}{1+H(s)} = 0
%	\frac{y(s)}{r(s)} &= \frac{H(s)}{1+H(s)}\\
%	y(s) &= \frac{H(s)}{1+H(s)}r(s) + \frac{1}{1+H(s)}d(s)
\end{align*}
Δηλαδή \( y_{\mathrm{ss}} = 0 \), άρα το σύστημα έχει πάλι τέλεια ακρίβεια, και σφάλμα θέσης
0.

\paragraph{Παράδειγμα}{}

\todo{Graph 12, πράξεις, + ή -?}

Τότε προκύπτει, μετά από πράξεις:
\begin{align*}
	e_{\mathrm{ssp}} &= -\frac{1}{k}
\end{align*}
Δηλαδή βλέπουμε ότι η διαφορετική θέση της εισόδου διαταραχής επηρεάζει το σφάλμα θέσης του
συστήματος.

Αν, προσπαθώντας να μειώσουμε στο 0 το σφάλμα της εξόδου, προσθέσουμε έναν ολοκληρωτή
πριν από την είσοδο διαταραχής:

\todo{Graph 13}

τότε το χαρακτηριστικό πολυώνυμο του συστήματος γίνεται:
\[
gs^3+bs^2+κ = 0
\]
που έχει ρίζες στο δεξί ημιεπίπεδο, άρα οδηγεί σε ασταθές σύστημα.

Για να διορθώσουμε αυτήν την ατέλεια, χρησιμοποιούμε έναν \textbf{ελεγκτή PI}
(Proportional \& Integral), δηλαδή πολλαπλασιάζουμε την είσοδό του \( e(t) \) 
με \( K_P e(t) \) και ολοκληρώνουμε με
\( K_I \int e(t) \)).

\begin{infobox}{Ελεγκτής PI}
Σύμφωνα με την παραπάνω παράγραφο, η έξοδος \( u(t) \) ενός ελεγκτή PI είναι:
\[
u(t) = K_P e(t) + K_I \int e(t) \dif t
\]
(όπου \( e \) η είσοδος)
και, μετασχηματίζοντας κατά Laplace:
\[
u(s) = \left( K_P + \frac{K_I}{s} \right) =
\frac{K_P\left( s+\frac{K_I}{K_P} \right)}{s}
= \frac{K_P(s+z)}{s}
\]
όπου \( z = \frac{K_P}{K_I} \) μία σταθερή τιμή.
\end{infobox}

Στο συγκεκριμένο παράδειγμα, αντικαθιστούμε τη συνάρτηση μεταφοράς \( \sfrac{κ}{s}  \) με
τη συνάρτηση:
\[
K_p\left(\frac{s+z}{s}\right)
\]
όπου \( z = \frac{K_P}{K_I} \),
και το χαρακτηριστικό πολυώνυμο γίνεται:
\[
x(s) = Js^3 + bs^2 + K_p s + K_I = 0
\]
που μπορεί να είναι ευσταθές.

\paragraph{Παράδειγμα} \hspace{0pt}

Στο σύστημα χωρίς βρόγχο:

\todo{Graph 14}

\begin{align*}
	e_{\mathrm{ssp}} &= \lim_{s\to 0} se(s) = \lim_{s\to 0}\left(1-H_κ(s)\right) \\
	e_{\mathrm{ssv}} &= \lim_{s\to 0} \frac{1-H_κ(s)}{s} \\
	e_{\mathrm{ssa}} &= \lim_{s\to 0} \frac{1-H_κ(s)}{s^2}
\end{align*}

\subsection{Ασκήσεις}
\paragraph{Άσκηση}
Ποιές από τις παρακάτω συναρτήσεις μεταφοράς έχουν \textbf{ρυθμούς} (ρίζες του παρονομαστή)
που δεν είναι πόλοι;
\begin{enumroman}
	\item \( \displaystyle \frac{s+8}{(s+3)(s+10)} \)
	\item \( \displaystyle \frac{s+1}{(s+1)^2(s+2)} \)
	\item \( \displaystyle \frac{s+9}{(s+2)^2+9} \)
	\item \( \displaystyle \frac{s+1}{(s+1)(s+2)} \)
\end{enumroman}
\subparagraph{Απάντηση}
\begin{enumroman}
	\item Έχει μηδενικό στο \( -8 \) και πόλλους στα \( -3 \) και \( -10 \).
	\item Έχει μόνο έναν πόλο στο \( -1 \) και στο \( -2 \).
	\item Έχει μηδενικό στο \( -9 \) και πόλους στα \( -2+j3 \) και \( -2-j3 \).
    \item Έχει μόνο πόλο στο \( -2 \).
\end{enumroman}

Η λύση αυτή μπορεί να προκύψει από τους ορισμούς του πόλου και του μηδενικού.

\end{document}
